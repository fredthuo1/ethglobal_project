"use strict";var bl=Object.create;var It=Object.defineProperty;var El=Object.getOwnPropertyDescriptor;var Ol=Object.getOwnPropertyNames;var _l=Object.getPrototypeOf,xl=Object.prototype.hasOwnProperty;var L=(e,t)=>()=>(e&&(t=e(e=0)),t);var m=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),be=(e,t)=>{for(var r in t)It(e,r,{get:t[r],enumerable:!0})},no=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Ol(t))!xl.call(e,i)&&i!==r&&It(e,i,{get:()=>t[i],enumerable:!(n=El(t,i))||n.enumerable});return e};var Ee=(e,t,r)=>(r=e!=null?bl(_l(e)):{},no(t||!e||!e.__esModule?It(r,"default",{value:e,enumerable:!0}):r,e)),Oe=e=>no(It({},"__esModule",{value:!0}),e);var Yr=m(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.default=Al;var Pl=Rl(require("crypto"));function Rl(e){return e&&e.__esModule?e:{default:e}}var Dt=new Uint8Array(256),Ct=Dt.length;function Al(){return Ct>Dt.length-16&&(Pl.default.randomFillSync(Dt),Ct=0),Dt.slice(Ct,Ct+=16)}});var io=m(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.default=void 0;var Ll=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;Ft.default=Ll});var et=m(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.default=void 0;var ql=Tl(io());function Tl(e){return e&&e.__esModule?e:{default:e}}function Nl(e){return typeof e=="string"&&ql.default.test(e)}var Il=Nl;kt.default=Il});var tt=m(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});jt.default=void 0;var Cl=Dl(et());function Dl(e){return e&&e.__esModule?e:{default:e}}var k=[];for(let e=0;e<256;++e)k.push((e+256).toString(16).substr(1));function Fl(e,t=0){let r=(k[e[t+0]]+k[e[t+1]]+k[e[t+2]]+k[e[t+3]]+"-"+k[e[t+4]]+k[e[t+5]]+"-"+k[e[t+6]]+k[e[t+7]]+"-"+k[e[t+8]]+k[e[t+9]]+"-"+k[e[t+10]]+k[e[t+11]]+k[e[t+12]]+k[e[t+13]]+k[e[t+14]]+k[e[t+15]]).toLowerCase();if(!(0,Cl.default)(r))throw TypeError("Stringified UUID is invalid");return r}var kl=Fl;jt.default=kl});var ao=m(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.default=void 0;var jl=so(Yr()),Ml=so(tt());function so(e){return e&&e.__esModule?e:{default:e}}var oo,Kr,Qr=0,Xr=0;function $l(e,t,r){let n=t&&r||0,i=t||new Array(16);e=e||{};let o=e.node||oo,s=e.clockseq!==void 0?e.clockseq:Kr;if(o==null||s==null){let l=e.random||(e.rng||jl.default)();o==null&&(o=oo=[l[0]|1,l[1],l[2],l[3],l[4],l[5]]),s==null&&(s=Kr=(l[6]<<8|l[7])&16383)}let a=e.msecs!==void 0?e.msecs:Date.now(),u=e.nsecs!==void 0?e.nsecs:Xr+1,c=a-Qr+(u-Xr)/1e4;if(c<0&&e.clockseq===void 0&&(s=s+1&16383),(c<0||a>Qr)&&e.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Qr=a,Xr=u,Kr=s,a+=122192928e5;let f=((a&268435455)*1e4+u)%4294967296;i[n++]=f>>>24&255,i[n++]=f>>>16&255,i[n++]=f>>>8&255,i[n++]=f&255;let d=a/4294967296*1e4&268435455;i[n++]=d>>>8&255,i[n++]=d&255,i[n++]=d>>>24&15|16,i[n++]=d>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(let l=0;l<6;++l)i[n+l]=o[l];return t||(0,Ml.default)(i)}var Bl=$l;Mt.default=Bl});var Zr=m($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.default=void 0;var Hl=Ul(et());function Ul(e){return e&&e.__esModule?e:{default:e}}function Wl(e){if(!(0,Hl.default)(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var Gl=Wl;$t.default=Gl});var en=m(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.default=Yl;_e.URL=_e.DNS=void 0;var Vl=uo(tt()),zl=uo(Zr());function uo(e){return e&&e.__esModule?e:{default:e}}function Jl(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var co="6ba7b810-9dad-11d1-80b4-00c04fd430c8";_e.DNS=co;var fo="6ba7b811-9dad-11d1-80b4-00c04fd430c8";_e.URL=fo;function Yl(e,t,r){function n(i,o,s,a){if(typeof i=="string"&&(i=Jl(i)),typeof o=="string"&&(o=(0,zl.default)(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=r(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,s){a=a||0;for(let c=0;c<16;++c)s[a+c]=u[c];return s}return(0,Vl.default)(u)}try{n.name=e}catch{}return n.DNS=co,n.URL=fo,n}});var lo=m(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.default=void 0;var Kl=Ql(require("crypto"));function Ql(e){return e&&e.__esModule?e:{default:e}}function Xl(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),Kl.default.createHash("md5").update(e).digest()}var Zl=Xl;Bt.default=Zl});var po=m(Ht=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});Ht.default=void 0;var ed=yo(en()),td=yo(lo());function yo(e){return e&&e.__esModule?e:{default:e}}var rd=(0,ed.default)("v3",48,td.default),nd=rd;Ht.default=nd});var ho=m(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.default=void 0;var id=mo(Yr()),od=mo(tt());function mo(e){return e&&e.__esModule?e:{default:e}}function sd(e,t,r){e=e||{};let n=e.random||(e.rng||id.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let i=0;i<16;++i)t[r+i]=n[i];return t}return(0,od.default)(n)}var ad=sd;Ut.default=ad});var go=m(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.default=void 0;var ud=cd(require("crypto"));function cd(e){return e&&e.__esModule?e:{default:e}}function fd(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),ud.default.createHash("sha1").update(e).digest()}var ld=fd;Wt.default=ld});var So=m(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.default=void 0;var dd=vo(en()),yd=vo(go());function vo(e){return e&&e.__esModule?e:{default:e}}var pd=(0,dd.default)("v5",80,yd.default),md=pd;Gt.default=md});var wo=m(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.default=void 0;var hd="00000000-0000-0000-0000-000000000000";Vt.default=hd});var bo=m(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.default=void 0;var gd=vd(et());function vd(e){return e&&e.__esModule?e:{default:e}}function Sd(e){if(!(0,gd.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var wd=Sd;zt.default=wd});var Eo=m(ee=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0});Object.defineProperty(ee,"v1",{enumerable:!0,get:function(){return bd.default}});Object.defineProperty(ee,"v3",{enumerable:!0,get:function(){return Ed.default}});Object.defineProperty(ee,"v4",{enumerable:!0,get:function(){return Od.default}});Object.defineProperty(ee,"v5",{enumerable:!0,get:function(){return _d.default}});Object.defineProperty(ee,"NIL",{enumerable:!0,get:function(){return xd.default}});Object.defineProperty(ee,"version",{enumerable:!0,get:function(){return Pd.default}});Object.defineProperty(ee,"validate",{enumerable:!0,get:function(){return Rd.default}});Object.defineProperty(ee,"stringify",{enumerable:!0,get:function(){return Ad.default}});Object.defineProperty(ee,"parse",{enumerable:!0,get:function(){return Ld.default}});var bd=de(ao()),Ed=de(po()),Od=de(ho()),_d=de(So()),xd=de(wo()),Pd=de(bo()),Rd=de(et()),Ad=de(tt()),Ld=de(Zr());function de(e){return e&&e.__esModule?e:{default:e}}});var ie,Aw,Lw,Jt,qw,Tw,Nw,Iw,Cw,Dw,tn=L(()=>{ie=Ee(Eo(),1),Aw=ie.default.v1,Lw=ie.default.v3,Jt=ie.default.v4,qw=ie.default.v5,Tw=ie.default.NIL,Nw=ie.default.version,Iw=ie.default.validate,Cw=ie.default.stringify,Dw=ie.default.parse});var Oo={};be(Oo,{LambdaInvocation:()=>rt,default:()=>Yt});var Yt,rt,rn=L(()=>{"use strict";tn();Yt=class{constructor(){this._id=Jt().toString();this._spawnedAt=Date.now();this._invocationCounter=0;this._lifetimeDuration=0}get id(){return this._id}get age(){return Date.now()-this._spawnedAt}get invocationCounter(){return this._invocationCounter}get lifetimeDuration(){return this._lifetimeDuration}startInvocation(){++this._invocationCounter}stopInvocation(t){this._lifetimeDuration+=t}},rt=class{constructor(t){this._startTime=Date.now();this._isRunning=!1;this._lambda=t,this._stopTime=this._startTime}get lambda(){return this._lambda}get duration(){return this._stopTime-this._startTime}start(){this._isRunning||(this._isRunning=!0,this._lambda.startInvocation())}stop(){this._isRunning&&(this._isRunning=!1,this._stopTime=Date.now(),this._lambda.stopInvocation(this.duration))}}});var Ro=m((Fw,Po)=>{"use strict";Po.exports=xo;var{toString:Td}=Object.prototype,nn=Symbol("circular-ref-tag"),on=Symbol("pino-raw-err-ref"),_o=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:function(){return this[on]},set:function(e){this[on]=e}}});Object.defineProperty(_o,on,{writable:!0,value:{}});function xo(e){if(!(e instanceof Error))return e;e[nn]=void 0;let t=Object.create(_o);t.type=Td.call(e.constructor)==="[object Function]"?e.constructor.name:e.name,t.message=e.message,t.stack=e.stack;for(let r in e)if(t[r]===void 0){let n=e[r];n instanceof Error?n.hasOwnProperty(nn)||(t[r]=xo(n)):t[r]=n}return delete e[nn],t.raw=e,t}});var To=m((kw,qo)=>{"use strict";qo.exports={mapHttpRequest:Nd,reqSerializer:Lo};var sn=Symbol("pino-raw-req-ref"),Ao=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},query:{enumerable:!0,writable:!0,value:""},params:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[sn]},set:function(e){this[sn]=e}}});Object.defineProperty(Ao,sn,{writable:!0,value:{}});function Lo(e){let t=e.info||e.socket,r=Object.create(Ao);return r.id=typeof e.id=="function"?e.id():e.id||(e.info?e.info.id:void 0),r.method=e.method,e.originalUrl?(r.url=e.originalUrl,r.query=e.query,r.params=e.params):r.url=e.path||(e.url?e.url.path||e.url:void 0),r.headers=e.headers,r.remoteAddress=t&&t.remoteAddress,r.remotePort=t&&t.remotePort,r.raw=e.raw||e,r}function Nd(e){return{req:Lo(e)}}});var Do=m((jw,Co)=>{"use strict";Co.exports={mapHttpResponse:Id,resSerializer:Io};var an=Symbol("pino-raw-res-ref"),No=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[an]},set:function(e){this[an]=e}}});Object.defineProperty(No,an,{writable:!0,value:{}});function Io(e){let t=Object.create(No);return t.statusCode=e.statusCode,t.headers=e.getHeaders?e.getHeaders():e._headers,t.raw=e,t}function Id(e){return{res:Io(e)}}});var cn=m((Mw,Fo)=>{"use strict";var un=Ro(),Kt=To(),Qt=Do();Fo.exports={err:un,mapHttpRequest:Kt.mapHttpRequest,mapHttpResponse:Qt.mapHttpResponse,req:Kt.reqSerializer,res:Qt.resSerializer,wrapErrorSerializer:function(t){return t===un?t:function(n){return t(un(n))}},wrapRequestSerializer:function(t){return t===Kt.reqSerializer?t:function(n){return t(Kt.reqSerializer(n))}},wrapResponseSerializer:function(t){return t===Qt.resSerializer?t:function(n){return t(Qt.resSerializer(n))}}}});var jo=m(($w,ko)=>{"use strict";var{createContext:Cd,runInContext:Dd}=require("vm");ko.exports=Fd;function Fd(e={}){let{ERR_PATHS_MUST_BE_STRINGS:t=()=>"fast-redact - Paths must be (non-empty) strings",ERR_INVALID_PATH:r=n=>`fast-redact \u2013 Invalid path (${n})`}=e;return function({paths:i}){i.forEach(o=>{if(typeof o!="string")throw Error(t());try{if(/〇/.test(o))throw Error();let s=new Proxy({},{get:()=>s,set:()=>{throw Error()}}),a=(o[0]==="["?"":".")+o.replace(/^\*/,"\u3007").replace(/\.\*/g,".\u3007").replace(/\[\*\]/g,"[\u3007]");if(/\n|\r|;/.test(a)||/\/\*/.test(a))throw Error();Dd(`
          (function () {
            'use strict'
            o${a}
            if ([o${a}].length !== 1) throw Error()
          })()
        `,Cd({o:s,"\u3007":null}),{codeGeneration:{strings:!1,wasm:!1}})}catch{throw Error(r(o))}})}}});var Xt=m((Bw,Mo)=>{"use strict";Mo.exports=/[^.[\]]+|\[((?:.)*?)\]/g});var Bo=m((Hw,$o)=>{"use strict";var kd=Xt();$o.exports=jd;function jd({paths:e}){let t=[];var r=0;let n=e.reduce(function(i,o,s){var a=o.match(kd).map(f=>f.replace(/'|"|`/g,""));let u=o[0]==="[";a=a.map(f=>f[0]==="["?f.substr(1,f.length-2):f);let c=a.indexOf("*");if(c>-1){let f=a.slice(0,c),d=f.join("."),l=a.slice(c+1,a.length);if(l.indexOf("*")>-1)throw Error("fast-redact \u2013 Only one wildcard per path is supported");let y=l.length>0;r++,t.push({before:f,beforeStr:d,after:l,nested:y})}else i[o]={path:a,val:void 0,precensored:!1,circle:"",escPath:JSON.stringify(o),leadingBracket:u};return i},{});return{wildcards:t,wcLen:r,secret:n}}});var Uo=m((Uw,Ho)=>{"use strict";var Md=Xt();Ho.exports=$d;function $d({secret:e,serialize:t,wcLen:r,strict:n,isCensorFct:i,censorFctTakesPath:o},s){let a=Function("o",`
    if (typeof o !== 'object' || o == null) {
      ${Wd(n,t)}
    }
    const { censor, secret } = this
    ${Bd(e,i,o)}
    this.compileRestore()
    ${Hd(r>0,i,o)}
    ${Ud(t)}
  `).bind(s);return t===!1&&(a.restore=u=>s.restore(u)),a}function Bd(e,t,r){return Object.keys(e).map(n=>{let{escPath:i,leadingBracket:o,path:s}=e[n],a=o?1:0,u=o?"":".",c=[];for(var f;(f=Md.exec(n))!==null;){let[,p]=f,{index:h,input:g}=f;h>a&&c.push(g.substring(0,h-(p?0:1)))}var d=c.map(p=>`o${u}${p}`).join(" && ");d.length===0?d+=`o${u}${n} != null`:d+=` && o${u}${n} != null`;let l=`
      switch (true) {
        ${c.reverse().map(p=>`
          case o${u}${p} === censor:
            secret[${i}].circle = ${JSON.stringify(p)}
            break
        `).join(`
`)}
      }
    `,y=r?`val, ${JSON.stringify(s)}`:"val";return`
      if (${d}) {
        const val = o${u}${n}
        if (val === censor) {
          secret[${i}].precensored = true
        } else {
          secret[${i}].val = val
          o${u}${n} = ${t?`censor(${y})`:"censor"}
          ${l}
        }
      }
    `}).join(`
`)}function Hd(e,t,r){return e===!0?`
    {
      const { wildcards, wcLen, groupRedact, nestedRedact } = this
      for (var i = 0; i < wcLen; i++) {
        const { before, beforeStr, after, nested } = wildcards[i]
        if (nested === true) {
          secret[beforeStr] = secret[beforeStr] || []
          nestedRedact(secret[beforeStr], o, before, after, censor, ${t}, ${r})
        } else secret[beforeStr] = groupRedact(o, before, censor, ${t}, ${r})
      }
    }
  `:""}function Ud(e){return e===!1?"return o":`
    var s = this.serialize(o)
    this.restore(o)
    return s
  `}function Wd(e,t){return e===!0?"throw Error('fast-redact: primitives cannot be redacted')":t===!1?"return o":"return this.serialize(o)"}});var fn=m((Ww,Go)=>{"use strict";Go.exports={groupRedact:Vd,groupRestore:Gd,nestedRedact:Jd,nestedRestore:zd};function Gd({keys:e,values:t,target:r}){if(r==null)return;let n=e.length;for(var i=0;i<n;i++){let o=e[i];r[o]=t[i]}}function Vd(e,t,r,n,i){let o=Wo(e,t);if(o==null)return{keys:null,values:null,target:null,flat:!0};let s=Object.keys(o),a=s.length,u=t.length,c=i?[...t]:void 0,f=new Array(a);for(var d=0;d<a;d++){let l=s[d];f[d]=o[l],i?(c[u]=l,o[l]=r(o[l],c)):n?o[l]=r(o[l]):o[l]=r}return{keys:s,values:f,target:o,flat:!0}}function zd(e){let t=e.length;for(var r=0;r<t;r++){let{key:n,target:i,value:o}=e[r];i[n]=o}}function Jd(e,t,r,n,i,o,s){let a=Wo(t,r);if(a==null)return;let u=Object.keys(a),c=u.length;for(var f=0;f<c;f++){let d=u[f],{value:l,parent:y,exists:p}=Kd(a,d,r,n,i,o,s);p===!0&&y!==null&&e.push({key:n[n.length-1],target:y,value:l})}return e}function Yd(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Kd(e,t,r,n,i,o,s){let a=n.length,u=a-1,c=t;var f=-1,d,l,y,p=null,h=!0;if(y=d=e[t],typeof d!="object")return{value:null,parent:null,exists:h};for(;d!=null&&++f<a;){if(t=n[f],p=y,!(t in d)){h=!1;break}if(y=d[t],l=f!==u?y:o?s?i(y,[...r,c,...n]):i(y):i,d[t]=Yd(d,t)&&l===y||l===void 0&&i!==void 0?d[t]:l,d=d[t],typeof d!="object")break}return{value:y,parent:p,exists:h}}function Wo(e,t){for(var r=-1,n=t.length,i=e;i!=null&&++r<n;)i=i[t[r]];return i}});var zo=m((Gw,Vo)=>{"use strict";var{groupRestore:Qd,nestedRestore:Xd}=fn();Vo.exports=Zd;function Zd({secret:e,wcLen:t}){return function(){if(this.restore)return;let n=Object.keys(e),i=ey(e,n),o=t>0,s=o?{secret:e,groupRestore:Qd,nestedRestore:Xd}:{secret:e};this.restore=Function("o",ty(i,n,o)).bind(s)}}function ey(e,t){return t.map(r=>{let{circle:n,escPath:i,leadingBracket:o}=e[r],a=n?`o.${n} = secret[${i}].val`:`o${o?"":"."}${r} = secret[${i}].val`,u=`secret[${i}].val = undefined`;return`
      if (secret[${i}].val !== undefined) {
        try { ${a} } catch (e) {}
        ${u}
      }
    `}).join("")}function ty(e,t,r){return`
    const secret = this.secret
    ${r===!0?`
    const keys = Object.keys(secret)
    const len = keys.length
    for (var i = len - 1; i >= ${t.length}; i--) {
      const k = keys[i]
      const o = secret[k]
      if (o.flat === true) this.groupRestore(o)
      else this.nestedRestore(o)
      secret[k] = null
    }
  `:""}
    ${e}
    return o
  `}});var Yo=m((Vw,Jo)=>{"use strict";Jo.exports=ry;function ry(e){let{secret:t,censor:r,compileRestore:n,serialize:i,groupRedact:o,nestedRedact:s,wildcards:a,wcLen:u}=e,c=[{secret:t,censor:r,compileRestore:n}];return i!==!1&&c.push({serialize:i}),u>0&&c.push({groupRedact:o,nestedRedact:s,wildcards:a,wcLen:u}),Object.assign(...c)}});var Xo=m((zw,Qo)=>{"use strict";var Ko=jo(),ny=Bo(),iy=Uo(),oy=zo(),{groupRedact:sy,nestedRedact:ay}=fn(),uy=Yo(),cy=Xt(),fy=Ko(),ln=e=>e;ln.restore=ln;var ly="[REDACTED]";dn.rx=cy;dn.validator=Ko;Qo.exports=dn;function dn(e={}){let t=Array.from(new Set(e.paths||[])),r="serialize"in e&&(e.serialize===!1||typeof e.serialize=="function")?e.serialize:JSON.stringify,n=e.remove;if(n===!0&&r!==JSON.stringify)throw Error("fast-redact \u2013 remove option may only be set when serializer is JSON.stringify");let i=n===!0?void 0:"censor"in e?e.censor:ly,o=typeof i=="function",s=o&&i.length>1;if(t.length===0)return r||ln;fy({paths:t,serialize:r,censor:i});let{wildcards:a,wcLen:u,secret:c}=ny({paths:t,censor:i}),f=oy({secret:c,wcLen:u}),d="strict"in e?e.strict:!0;return iy({secret:c,wcLen:u,serialize:r,strict:d,isCensorFct:o,censorFctTakesPath:s},uy({secret:c,censor:i,compileRestore:f,serialize:r,groupRedact:sy,nestedRedact:ay,wildcards:a,wcLen:u}))}});var ke=m((Jw,Zo)=>{"use strict";var dy=Symbol("pino.setLevel"),yy=Symbol("pino.getLevel"),py=Symbol("pino.levelVal"),my=Symbol("pino.useLevelLabels"),hy=Symbol("pino.useOnlyCustomLevels"),gy=Symbol("pino.mixin"),vy=Symbol("pino.lsCache"),Sy=Symbol("pino.chindings"),wy=Symbol("pino.parsedChindings"),by=Symbol("pino.asJson"),Ey=Symbol("pino.write"),Oy=Symbol("pino.redactFmt"),_y=Symbol("pino.time"),xy=Symbol("pino.timeSliceIndex"),Py=Symbol("pino.stream"),Ry=Symbol("pino.stringify"),Ay=Symbol("pino.stringifiers"),Ly=Symbol("pino.end"),qy=Symbol("pino.formatOpts"),Ty=Symbol("pino.messageKey"),Ny=Symbol("pino.nestedKey"),Iy=Symbol("pino.wildcardFirst"),Cy=Symbol.for("pino.serializers"),Dy=Symbol.for("pino.formatters"),Fy=Symbol.for("pino.hooks"),ky=Symbol.for("pino.metadata");Zo.exports={setLevelSym:dy,getLevelSym:yy,levelValSym:py,useLevelLabelsSym:my,mixinSym:gy,lsCacheSym:vy,chindingsSym:Sy,parsedChindingsSym:wy,asJsonSym:by,writeSym:Ey,serializersSym:Cy,redactFmtSym:Oy,timeSym:_y,timeSliceIndexSym:xy,streamSym:Py,stringifySym:Ry,stringifiersSym:Ay,endSym:Ly,formatOptsSym:qy,messageKeySym:Ty,nestedKeySym:Ny,wildcardFirstSym:Iy,needsMetadataGsym:ky,useOnlyCustomLevelsSym:hy,formattersSym:Dy,hooksSym:Fy}});var mn=m((Yw,ns)=>{"use strict";var pn=Xo(),{redactFmtSym:jy,wildcardFirstSym:Zt}=ke(),{rx:yn,validator:My}=pn,es=My({ERR_PATHS_MUST_BE_STRINGS:()=>"pino \u2013 redacted paths must be strings",ERR_INVALID_PATH:e=>`pino \u2013 redact paths array contains an invalid path (${e})`}),ts="[Redacted]",rs=!1;function $y(e,t){let{paths:r,censor:n}=By(e),i=r.reduce((a,u)=>{yn.lastIndex=0;let c=yn.exec(u),f=yn.exec(u),d=c[1]!==void 0?c[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):c[0];if(d==="*"&&(d=Zt),f===null)return a[d]=null,a;if(a[d]===null)return a;let{index:l}=f,y=`${u.substr(l,u.length-1)}`;return a[d]=a[d]||[],d!==Zt&&a[d].length===0&&a[d].push(...a[Zt]||[]),d===Zt&&Object.keys(a).forEach(function(p){a[p]&&a[p].push(y)}),a[d].push(y),a},{}),o={[jy]:pn({paths:r,censor:n,serialize:t,strict:rs})},s=(...a)=>t(typeof n=="function"?n(...a):n);return[...Object.keys(i),...Object.getOwnPropertySymbols(i)].reduce((a,u)=>{if(i[u]===null)a[u]=c=>s(c,[u]);else{let c=typeof n=="function"?(f,d)=>n(f,[u,...d]):n;a[u]=pn({paths:i[u],censor:c,serialize:t,strict:rs})}return a},o)}function By(e){if(Array.isArray(e))return e={paths:e,censor:ts},es(e),e;let{paths:t,censor:r=ts,remove:n}=e;if(Array.isArray(t)===!1)throw Error("pino \u2013 redact must contain an array of strings");return n===!0&&(r=void 0),es({paths:t,censor:r}),{paths:t,censor:r}}ns.exports=$y});var os=m((Kw,is)=>{"use strict";var Hy=()=>"",Uy=()=>`,"time":${Date.now()}`,Wy=()=>`,"time":${Math.round(Date.now()/1e3)}`,Gy=()=>`,"time":"${new Date(Date.now()).toISOString()}"`;is.exports={nullTime:Hy,epochTime:Uy,unixTime:Wy,isoTime:Gy}});var er=m((Qw,ss)=>{"use strict";function Vy(e){return e|0,e}ss.exports=Vy});var as=m((Xw,hn)=>{"use strict";if(typeof SharedArrayBuffer<"u"&&typeof Atomics<"u"){let t=function(r){if((r>0&&r<1/0)===!1)throw typeof r!="number"&&typeof r!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");Atomics.wait(e,0,0,Number(r))},e=new Int32Array(new SharedArrayBuffer(4));hn.exports=t}else{let e=function(t){if((t>0&&t<1/0)===!1)throw typeof t!="number"&&typeof t!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");let n=Date.now()+Number(t);for(;n>Date.now(););};hn.exports=e}});var Sn=m((Zw,fs)=>{"use strict";var oe=require("fs"),zy=require("events"),Jy=er(),Yy=require("util").inherits,vn=100,us=as(),gn=16*1024*1024;function cs(e,t){t._opening=!0,t._writing=!0,t._asyncDrainScheduled=!1;function r(n,i){if(n){t._reopening=!1,t._writing=!1,t._opening=!1,t.sync?process.nextTick(()=>{t.listenerCount("error")>0&&t.emit("error",n)}):t.emit("error",n);return}if(t.fd=i,t.file=e,t._reopening=!1,t._opening=!1,t._writing=!1,t.sync?process.nextTick(()=>t.emit("ready")):t.emit("ready"),t._reopening)return;let o=t._buf.length;o>0&&o>t.minLength&&!t.destroyed&&je(t)}if(t.sync)try{let n=oe.openSync(e,"a");r(null,n)}catch(n){throw r(n),n}else oe.open(e,"a",r)}function se(e){if(!(this instanceof se))return new se(e);let{fd:t,dest:r,minLength:n,sync:i}=e||{};if(t=t||r,this._buf="",this.fd=-1,this._writing=!1,this._writingBuf="",this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this.file=null,this.destroyed=!1,this.sync=i||!1,this.minLength=n||0,typeof t=="number")this.fd=t,process.nextTick(()=>this.emit("ready"));else if(typeof t=="string")cs(t,this);else throw new Error("SonicBoom supports only file descriptors and files");this.release=(o,s)=>{if(o){if(o.code==="EAGAIN")if(this.sync)try{us(vn),this.release(void 0,0)}catch(u){this.release(u)}else setTimeout(()=>{oe.write(this.fd,this._writingBuf,"utf8",this.release)},vn);else this._buf=this._writingBuf+this._buf,this._writingBuf="",this._writing=!1,this.emit("error",o);return}if(this._writingBuf.length!==s)if(this._writingBuf=this._writingBuf.slice(s),this.sync)try{do s=oe.writeSync(this.fd,this._writingBuf,"utf8"),this._writingBuf=this._writingBuf.slice(s);while(this._writingBuf.length!==0)}catch(u){this.release(u);return}else{oe.write(this.fd,this._writingBuf,"utf8",this.release);return}if(this._writingBuf="",this.destroyed)return;let a=this._buf.length;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):a>0&&a>this.minLength?je(this):this._ending?a>0?je(this):(this._writing=!1,tr(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick(Ky,this)):this.emit("drain"))},this.on("newListener",function(o){o==="drain"&&(this._asyncDrainScheduled=!1)})}function Ky(e){e.listenerCount("drain")>0&&(e._asyncDrainScheduled=!1,e.emit("drain"))}Yy(se,zy);se.prototype.write=function(e){if(this.destroyed)throw new Error("SonicBoom destroyed");this._buf+=e;let t=this._buf.length;return!this._writing&&t>this.minLength&&je(this),t<16384};se.prototype.flush=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");this._writing||this.minLength<=0||je(this)};se.prototype.reopen=function(e){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.reopen(e)});return}if(this._ending)return;if(!this.file)throw new Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");if(this._reopening=!0,this._writing)return;let t=this.fd;this.once("ready",()=>{t!==this.fd&&oe.close(t,r=>{if(r)return this.emit("error",r)})}),cs(e||this.file,this)};se.prototype.end=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.end()});return}if(!this._ending){if(this._ending=!0,!this._writing&&this._buf.length>0&&this.fd>=0){je(this);return}this._writing||tr(this)}};se.prototype.flushSync=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");for(;this._buf.length>0;)try{oe.writeSync(this.fd,this._buf,"utf8"),this._buf=""}catch(e){if(e.code!=="EAGAIN")throw e;us(vn)}};se.prototype.destroy=function(){this.destroyed||tr(this)};function je(e){e._writing=!0;let t=e._buf,r=e.release;if(t.length>gn?(t=t.slice(0,gn),e._buf=e._buf.slice(gn)):e._buf="",Jy(t),e._writingBuf=t,e.sync)try{let n=oe.writeSync(e.fd,t,"utf8");r(null,n)}catch(n){r(n)}else oe.write(e.fd,t,"utf8",r)}function tr(e){if(e.fd===-1){e.once("ready",tr.bind(null,e));return}oe.close(e.fd,t=>{if(t){e.emit("error",t);return}e._ending&&!e._writing&&e.emit("finish"),e.emit("close")}),e.destroyed=!0,e._buf=""}fs.exports=se});var ds=m((eb,ls)=>{"use strict";var{format:wn}=require("util");function Qy(){let e={},t=new Map;function r(i,o,s){if(!i)throw new Error("Fastify warning name must not be empty");if(!o)throw new Error("Fastify warning code must not be empty");if(!s)throw new Error("Fastify warning message must not be empty");if(o=o.toUpperCase(),e[o]!==void 0)throw new Error(`The code '${o}' already exist`);function a(u,c,f){let d;return u&&c&&f?d=wn(s,u,c,f):u&&c?d=wn(s,u,c):u?d=wn(s,u):d=s,{code:o,name:i,message:d}}return t.set(o,!1),e[o]=a,e[o]}function n(i,o,s,a){if(e[i]===void 0)throw new Error(`The code '${i}' does not exist`);if(t.get(i)===!0)return;t.set(i,!0);let u=e[i](o,s,a);process.emitWarning(u.message,u.name,u.code)}return{create:r,emit:n,emitted:t}}ls.exports=Qy});var ps=m((tb,ys)=>{"use strict";var nt=ds()();ys.exports=nt;var rr="PinoWarning";nt.create(rr,"PINODEP004","bindings.serializers is deprecated, use options.serializers option instead");nt.create(rr,"PINODEP005","bindings.formatters is deprecated, use options.formatters option instead");nt.create(rr,"PINODEP006","bindings.customLevels is deprecated, use options.customLevels option instead");nt.create(rr,"PINODEP007","bindings.level is deprecated, use options.level option instead")});var hs=m((rb,ms)=>{"use strict";function Xy(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}ms.exports=Zy;function Zy(e,t,r){var n=r&&r.stringify||Xy,i=1;if(typeof e=="object"&&e!==null){var o=t.length+i;if(o===1)return e;var s=new Array(o);s[0]=n(e);for(var a=1;a<o;a++)s[a]=n(t[a]);return s.join(" ")}if(typeof e!="string")return e;var u=t.length;if(u===0)return e;for(var c="",f=1-i,d=-1,l=e&&e.length||0,y=0;y<l;){if(e.charCodeAt(y)===37&&y+1<l){switch(d=d>-1?d:0,e.charCodeAt(y+1)){case 100:case 102:if(f>=u||t[f]==null)break;d<y&&(c+=e.slice(d,y)),c+=Number(t[f]),d=y+2,y++;break;case 105:if(f>=u||t[f]==null)break;d<y&&(c+=e.slice(d,y)),c+=Math.floor(Number(t[f])),d=y+2,y++;break;case 79:case 111:case 106:if(f>=u||t[f]===void 0)break;d<y&&(c+=e.slice(d,y));var p=typeof t[f];if(p==="string"){c+="'"+t[f]+"'",d=y+2,y++;break}if(p==="function"){c+=t[f].name||"<anonymous>",d=y+2,y++;break}c+=n(t[f]),d=y+2,y++;break;case 115:if(f>=u)break;d<y&&(c+=e.slice(d,y)),c+=String(t[f]),d=y+2,y++;break;case 37:d<y&&(c+=e.slice(d,y)),c+="%",d=y+2,y++,f--;break}++f}++y}return d===-1?e:(d<l&&(c+=e.slice(d)),c)}});var Es=m((nb,bs)=>{bs.exports=it;it.default=it;it.stable=Ss;it.stableStringify=Ss;var nr="[...]",gs="[Circular]",Pe=[],xe=[];function vs(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function it(e,t,r,n){typeof n>"u"&&(n=vs()),bn(e,"",0,[],void 0,0,n);var i;try{xe.length===0?i=JSON.stringify(e,t,r):i=JSON.stringify(e,ws(t),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Pe.length!==0;){var o=Pe.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function Me(e,t,r,n){var i=Object.getOwnPropertyDescriptor(n,r);i.get!==void 0?i.configurable?(Object.defineProperty(n,r,{value:e}),Pe.push([n,r,t,i])):xe.push([t,r,e]):(n[r]=e,Pe.push([n,r,t]))}function bn(e,t,r,n,i,o,s){o+=1;var a;if(typeof e=="object"&&e!==null){for(a=0;a<n.length;a++)if(n[a]===e){Me(gs,e,t,i);return}if(typeof s.depthLimit<"u"&&o>s.depthLimit){Me(nr,e,t,i);return}if(typeof s.edgesLimit<"u"&&r+1>s.edgesLimit){Me(nr,e,t,i);return}if(n.push(e),Array.isArray(e))for(a=0;a<e.length;a++)bn(e[a],a,a,n,e,o,s);else{var u=Object.keys(e);for(a=0;a<u.length;a++){var c=u[a];bn(e[c],c,a,n,e,o,s)}}n.pop()}}function ep(e,t){return e<t?-1:e>t?1:0}function Ss(e,t,r,n){typeof n>"u"&&(n=vs());var i=En(e,"",0,[],void 0,0,n)||e,o;try{xe.length===0?o=JSON.stringify(i,t,r):o=JSON.stringify(i,ws(t),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Pe.length!==0;){var s=Pe.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return o}function En(e,t,r,n,i,o,s){o+=1;var a;if(typeof e=="object"&&e!==null){for(a=0;a<n.length;a++)if(n[a]===e){Me(gs,e,t,i);return}try{if(typeof e.toJSON=="function")return}catch{return}if(typeof s.depthLimit<"u"&&o>s.depthLimit){Me(nr,e,t,i);return}if(typeof s.edgesLimit<"u"&&r+1>s.edgesLimit){Me(nr,e,t,i);return}if(n.push(e),Array.isArray(e))for(a=0;a<e.length;a++)En(e[a],a,a,n,e,o,s);else{var u={},c=Object.keys(e).sort(ep);for(a=0;a<c.length;a++){var f=c[a];En(e[f],f,a,n,e,o,s),u[f]=e[f]}if(typeof i<"u")Pe.push([i,t,e]),i[t]=u;else return u}n.pop()}}function ws(e){return e=typeof e<"u"?e:function(t,r){return r},function(t,r){if(xe.length>0)for(var n=0;n<xe.length;n++){var i=xe[n];if(i[1]===t&&i[0]===r){r=i[2],xe.splice(n,1);break}}return e.call(this,t,r)}}});var or=m((ib,Cs)=>{"use strict";var Os=hs(),{mapHttpRequest:tp,mapHttpResponse:rp}=cn(),As=Sn(),np=Es(),{lsCacheSym:ip,chindingsSym:xn,parsedChindingsSym:On,writeSym:_s,serializersSym:Pn,formatOptsSym:xs,endSym:op,stringifiersSym:Rn,stringifySym:Ls,wildcardFirstSym:qs,needsMetadataGsym:Ts,redactFmtSym:sp,streamSym:ap,nestedKeySym:Ps,formattersSym:An,messageKeySym:Ns}=ke();function ot(){}function up(e,t){if(!t)return r;return function(...i){t.call(this,i,r,e)};function r(n,...i){if(typeof n=="object"){let o=n;n!==null&&(n.method&&n.headers&&n.socket?n=tp(n):typeof n.setHeader=="function"&&(n=rp(n))),this[Ps]&&(n={[this[Ps]]:n});let s;o===null&&i.length===0?s=[null]:(o=i.shift(),s=i),this[_s](n,Os(o,s,this[xs]),e)}else this[_s](null,Os(n,i,this[xs]),e)}}function cp(e){let t="",r=0,n=!1,i=255,o=e.length;if(o>100)return JSON.stringify(e);for(var s=0;s<o&&i>=32;s++)i=e.charCodeAt(s),(i===34||i===92)&&(t+=e.slice(r,s)+"\\",r=s,n=!0);return n?t+=e.slice(r):t=e,i<32?JSON.stringify(e):'"'+t+'"'}function fp(e,t,r,n){let i=this[Ls],o=this[Rn],s=this[op],a=this[xn],u=this[Pn],c=this[An],f=this[Ns],d=this[ip][r]+n;d=d+a;let l,y=e.hasOwnProperty===void 0;c.log&&(e=c.log(e)),t!==void 0&&(e[f]=t);let p=o[qs];for(let h in e)if(l=e[h],(y||e.hasOwnProperty(h))&&l!==void 0){l=u[h]?u[h](l):l;let g=o[h]||p;switch(typeof l){case"undefined":case"function":continue;case"number":Number.isFinite(l)===!1&&(l=null);case"boolean":g&&(l=g(l));break;case"string":l=(g||cp)(l);break;default:l=(g||i)(l)}if(l===void 0)continue;d+=',"'+h+'":'+l}return d+s}function lp(e,t){let r,n=e[xn],i=e[Ls],o=e[Rn],s=o[qs],a=e[Pn],u=e[An].bindings;t=u(t);for(let c in t)if(r=t[c],(c!=="level"&&c!=="serializers"&&c!=="formatters"&&c!=="customLevels"&&t.hasOwnProperty(c)&&r!==void 0)===!0){if(r=a[c]?a[c](r):r,r=(o[c]||s||i)(r),r===void 0)continue;n+=',"'+c+'":'+r}return n}function Is(e,t,r,n){if(t&&typeof t=="function")return t=t.bind(n),_n(t(e),r,e);try{let i=require("pino-pretty").prettyFactory||require("pino-pretty");return i.asMetaWrapper=_n,_n(i(e),r,e)}catch(i){throw i.message.startsWith("Cannot find module 'pino-pretty'")?Error("Missing `pino-pretty` module: `pino-pretty` must be installed separately"):i}}function _n(e,t,r){r=Object.assign({suppressFlushSyncWarning:!1},r);let n=!1;return{[Ts]:!0,lastLevel:0,lastMsg:null,lastObj:null,lastLogger:null,flushSync(){r.suppressFlushSyncWarning||n||(n=!0,Rs(t,this),t.write(e(Object.assign({level:40,msg:"pino.final with prettyPrint does not support flushing",time:Date.now()},this.chindings()))))},chindings(){let i=this.lastLogger,o=null;return i?(i.hasOwnProperty(On)?o=i[On]:(o=JSON.parse("{"+i[xn].substr(1)+"}"),i[On]=o),o):null},write(i){let o=this.lastLogger,s=this.chindings(),a=this.lastTime;a.match(/^\d+/)?a=parseInt(a):a=a.slice(1,-1);let u=this.lastObj,c=this.lastMsg,f=null,d=o[An],l=d.log?d.log(u):u,y=o[Ns];c&&l&&!l.hasOwnProperty(y)&&(l[y]=c);let p=Object.assign({level:this.lastLevel,time:a},l,f),h=o[Pn],g=Object.keys(h);for(var S=0;S<g.length;S++){let x=g[S];p[x]!==void 0&&(p[x]=h[x](p[x]))}for(let x in s)p.hasOwnProperty(x)||(p[x]=s[x]);let q=o[Rn][sp],M=e(typeof q=="function"?q(p):p);M!==void 0&&(Rs(t,this),t.write(M))}}}function dp(e){return e.write!==e.constructor.prototype.write}function ir(e){let t=new As(e);return t.on("error",r),t;function r(n){if(n.code==="EPIPE"){t.write=ot,t.end=ot,t.flushSync=ot,t.destroy=ot;return}t.removeListener("error",r),t.emit("error",n)}}function yp(e){return function(r,n={},i){if(typeof n=="string"?(i=ir({dest:n,sync:!0}),n={}):typeof i=="string"?i=ir({dest:i,sync:!0}):(n instanceof As||n.writable||n._writableState)&&(i=n,n=null),n=Object.assign({},e,n),"extreme"in n)throw Error("The extreme option has been removed, use pino.destination({ sync: false }) instead");if("onTerminated"in n)throw Error("The onTerminated option has been removed, use pino.final instead");"changeLevelName"in n&&(process.emitWarning("The changeLevelName option is deprecated and will be removed in v7. Use levelKey instead.",{code:"changeLevelName_deprecation"}),n.levelKey=n.changeLevelName,delete n.changeLevelName);let{enabled:o,prettyPrint:s,prettifier:a,messageKey:u}=n;if(o===!1&&(n.level="silent"),i=i||process.stdout,i===process.stdout&&i.fd>=0&&!dp(i)&&(i=ir({fd:i.fd,sync:!0})),s){let c=Object.assign({messageKey:u},s);i=Is(c,a,i,r)}return{opts:n,stream:i}}}function pp(e,t){if(typeof e>"u"||typeof e.child!="function")throw Error("expected a pino logger instance");let r=typeof t<"u";if(r&&typeof t!="function")throw Error("if supplied, the handler parameter should be a function");let n=e[ap];if(typeof n.flushSync!="function")throw Error("final requires a stream that has a flushSync method, such as pino.destination");let i=new Proxy(e,{get:(o,s)=>s in o.levels.values?(...a)=>{o[s](...a),n.flushSync()}:o[s]});return r?(o=null,...s)=>{try{n.flushSync()}catch{}return t(o,i,...s)}:i}function mp(e){try{return JSON.stringify(e)}catch{return np(e)}}function hp(e,t,r){return{level:e,bindings:t,log:r}}function Rs(e,t){e[Ts]===!0&&(e.lastLevel=t.lastLevel,e.lastMsg=t.lastMsg,e.lastObj=t.lastObj,e.lastTime=t.lastTime,e.lastLogger=t.lastLogger)}Cs.exports={noop:ot,buildSafeSonicBoom:ir,getPrettyStream:Is,asChindings:lp,asJson:fp,genLog:up,createArgsNormalizer:yp,final:pp,stringify:mp,buildFormatters:hp}});var Tn=m((ob,Fs)=>{"use strict";var gp=er(),{lsCacheSym:vp,levelValSym:Ln,useOnlyCustomLevelsSym:Sp,streamSym:wp,formattersSym:bp,hooksSym:Ep}=ke(),{noop:Op,genLog:Re}=or(),ae={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},Ds={fatal:e=>{let t=Re(ae.fatal,e);return function(...r){let n=this[wp];if(t.call(this,...r),typeof n.flushSync=="function")try{n.flushSync()}catch{}}},error:e=>Re(ae.error,e),warn:e=>Re(ae.warn,e),info:e=>Re(ae.info,e),debug:e=>Re(ae.debug,e),trace:e=>Re(ae.trace,e)},qn=Object.keys(ae).reduce((e,t)=>(e[ae[t]]=t,e),{}),_p=Object.keys(qn).reduce((e,t)=>(e[t]=gp('{"level":'+Number(t)),e),{});function xp(e){let t=e[bp].level,{labels:r}=e.levels,n={};for(let i in r){let o=t(r[i],Number(i));n[i]=JSON.stringify(o).slice(0,-1)}return e[vp]=n,e}function Pp(e,t){if(t)return!1;switch(e){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return!0;default:return!1}}function Rp(e){let{labels:t,values:r}=this.levels;if(typeof e=="number"){if(t[e]===void 0)throw Error("unknown level value"+e);e=t[e]}if(r[e]===void 0)throw Error("unknown level "+e);let n=this[Ln],i=this[Ln]=r[e],o=this[Sp],s=this[Ep].logMethod;for(let a in r){if(i>r[a]){this[a]=Op;continue}this[a]=Pp(a,o)?Ds[a](s):Re(r[a],s)}this.emit("level-change",e,i,t[n],n)}function Ap(e){let{levels:t,levelVal:r}=this;return t&&t.labels?t.labels[r]:""}function Lp(e){let{values:t}=this.levels,r=t[e];return r!==void 0&&r>=this[Ln]}function qp(e=null,t=!1){let r=e?Object.keys(e).reduce((o,s)=>(o[e[s]]=s,o),{}):null,n=Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),t?null:qn,r),i=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),t?null:ae,e);return{labels:n,values:i}}function Tp(e,t,r){if(typeof e=="number"){if(![].concat(Object.keys(t||{}).map(o=>t[o]),r?[]:Object.keys(qn).map(o=>+o),1/0).includes(e))throw Error(`default level:${e} must be included in custom levels`);return}let n=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),r?null:ae,t);if(!(e in n))throw Error(`default level:${e} must be included in custom levels`)}function Np(e,t){let{labels:r,values:n}=e;for(let i in t){if(i in n)throw Error("levels cannot be overridden");if(t[i]in r)throw Error("pre-existing level values cannot be used for new levels")}}Fs.exports={initialLsCache:_p,genLsCache:xp,levelMethods:Ds,getLevel:Ap,setLevel:Rp,isLevelEnabled:Lp,mappings:qp,assertNoLevelCollisions:Np,assertDefaultLevelFound:Tp}});var ks=m((sb,Ip)=>{Ip.exports={name:"pino",version:"6.13.3",description:"super fast, all natural json logger",main:"pino.js",browser:"./browser.js",files:["pino.js","bin.js","browser.js","pretty.js","usage.txt","test","docs","example.js","lib"],scripts:{docs:"docsify serve","browser-test":"airtap --local 8080 test/browser*test.js",lint:"eslint .",test:"npm run lint && tap --100 test/*test.js test/*/*test.js","test-ci":"npm run lint && tap test/*test.js test/*/*test.js --coverage-report=lcovonly","cov-ui":"tap --coverage-report=html test/*test.js test/*/*test.js",bench:"node benchmarks/utils/runbench all","bench-basic":"node benchmarks/utils/runbench basic","bench-object":"node benchmarks/utils/runbench object","bench-deep-object":"node benchmarks/utils/runbench deep-object","bench-multi-arg":"node benchmarks/utils/runbench multi-arg","bench-longs-tring":"node benchmarks/utils/runbench long-string","bench-child":"node benchmarks/utils/runbench child","bench-child-child":"node benchmarks/utils/runbench child-child","bench-child-creation":"node benchmarks/utils/runbench child-creation","bench-formatters":"node benchmarks/utils/runbench formatters","update-bench-doc":"node benchmarks/utils/generate-benchmark-doc > docs/benchmarks.md"},bin:{pino:"./bin.js"},precommit:"test",repository:{type:"git",url:"git+https://github.com/pinojs/pino.git"},keywords:["fast","logger","stream","json"],author:"Matteo Collina <hello@matteocollina.com>",contributors:["David Mark Clements <huperekchuno@googlemail.com>","James Sumners <james.sumners@gmail.com>","Thomas Watson Steen <w@tson.dk> (https://twitter.com/wa7son)"],license:"MIT",bugs:{url:"https://github.com/pinojs/pino/issues"},homepage:"http://getpino.io",devDependencies:{airtap:"4.0.3",benchmark:"^2.1.4",bole:"^4.0.0",bunyan:"^1.8.14","docsify-cli":"^4.4.1",eslint:"^7.17.0","eslint-config-standard":"^16.0.2","eslint-plugin-import":"^2.22.1","eslint-plugin-node":"^11.1.0","eslint-plugin-promise":"^5.1.0",execa:"^5.0.0",fastbench:"^1.0.1","flush-write-stream":"^2.0.0","import-fresh":"^3.2.1",log:"^6.0.0",loglevel:"^1.6.7","pino-pretty":"^5.0.0","pre-commit":"^1.2.2",proxyquire:"^2.1.3",pump:"^3.0.0",semver:"^7.0.0",split2:"^3.1.1",steed:"^1.1.3","strip-ansi":"^6.0.0",tap:"^15.0.1",tape:"^5.0.0",through2:"^4.0.0",winston:"^3.3.3"},dependencies:{"fast-redact":"^3.0.0","fast-safe-stringify":"^2.0.8","fastify-warning":"^0.2.0",flatstr:"^1.0.12","pino-std-serializers":"^3.1.0","quick-format-unescaped":"^4.0.3","sonic-boom":"^1.0.2"},_resolved:"https://registry.npmjs.org/pino/-/pino-6.13.3.tgz",_integrity:"sha512-tJy6qVgkh9MwNgqX1/oYi3ehfl2Y9H0uHyEEMsBe74KinESIjdMrMQDWpcZPpPicg3VV35d/GLQZmo4QgU2Xkg==",_from:"pino@6.13.3"}});var Nn=m((ab,js)=>{"use strict";var{version:Cp}=ks();js.exports={version:Cp}});var Js=m((cb,zs)=>{"use strict";var{EventEmitter:Dp}=require("events"),Fp=Sn(),kp=er(),sr=ps(),{lsCacheSym:jp,levelValSym:Mp,setLevelSym:Cn,getLevelSym:Ms,chindingsSym:Dn,parsedChindingsSym:$p,mixinSym:Bp,asJsonSym:Us,writeSym:Hp,timeSym:Up,timeSliceIndexSym:Wp,streamSym:Ws,serializersSym:Ae,formattersSym:In,useOnlyCustomLevelsSym:Gp,needsMetadataGsym:Vp,redactFmtSym:zp,stringifySym:Jp,formatOptsSym:Yp,stringifiersSym:Kp}=ke(),{getLevel:Qp,setLevel:Xp,isLevelEnabled:Zp,mappings:em,initialLsCache:tm,genLsCache:rm,assertNoLevelCollisions:nm}=Tn(),{asChindings:Gs,asJson:im,buildFormatters:$s,stringify:Bs}=or(),{version:om}=Nn(),sm=mn(),am=class{},Vs={constructor:am,child:um,bindings:cm,setBindings:fm,flush:dm,isLevelEnabled:Zp,version:om,get level(){return this[Ms]()},set level(e){this[Cn](e)},get levelVal(){return this[Mp]},set levelVal(e){throw Error("levelVal is read-only")},[jp]:tm,[Hp]:lm,[Us]:im,[Ms]:Qp,[Cn]:Xp};Object.setPrototypeOf(Vs,Dp.prototype);zs.exports=function(){return Object.create(Vs)};var Hs=e=>e;function um(e,t){if(!e)throw Error("missing bindings for child Pino");t=t||{};let r=this[Ae],n=this[In],i=Object.create(this);if(e.hasOwnProperty("serializers")===!0&&(sr.emit("PINODEP004"),t.serializers=e.serializers),e.hasOwnProperty("formatters")===!0&&(sr.emit("PINODEP005"),t.formatters=e.formatters),e.hasOwnProperty("customLevels")===!0&&(sr.emit("PINODEP006"),t.customLevels=e.customLevels),e.hasOwnProperty("level")===!0&&(sr.emit("PINODEP007"),t.level=e.level),t.hasOwnProperty("serializers")===!0){i[Ae]=Object.create(null);for(let f in r)i[Ae][f]=r[f];let u=Object.getOwnPropertySymbols(r);for(var o=0;o<u.length;o++){let f=u[o];i[Ae][f]=r[f]}for(let f in t.serializers)i[Ae][f]=t.serializers[f];let c=Object.getOwnPropertySymbols(t.serializers);for(var s=0;s<c.length;s++){let f=c[s];i[Ae][f]=t.serializers[f]}}else i[Ae]=r;if(t.hasOwnProperty("formatters")){let{level:u,bindings:c,log:f}=t.formatters;i[In]=$s(u||n.level,c||Hs,f||n.log)}else i[In]=$s(n.level,Hs,n.log);if(t.hasOwnProperty("customLevels")===!0&&(nm(this.levels,t.customLevels),i.levels=em(t.customLevels,i[Gp]),rm(i)),typeof t.redact=="object"&&t.redact!==null||Array.isArray(t.redact)){i.redact=t.redact;let u=sm(i.redact,Bs),c={stringify:u[zp]};i[Jp]=Bs,i[Kp]=u,i[Yp]=c}i[Dn]=Gs(i,e);let a=t.level||this.level;return i[Cn](a),i}function cm(){let t=`{${this[Dn].substr(1)}}`,r=JSON.parse(t);return delete r.pid,delete r.hostname,r}function fm(e){let t=Gs(this,e);this[Dn]=t,delete this[$p]}function lm(e,t,r){let n=this[Up](),i=this[Bp],o=e instanceof Error,s;e==null?s=i?i({}):{}:(s=Object.assign(i?i(e):{},e),!t&&o&&(t=e.message),o&&(s.stack=e.stack,s.type||(s.type="Error")));let a=this[Us](s,t,r,n),u=this[Ws];u[Vp]===!0&&(u.lastLevel=r,u.lastObj=s,u.lastMsg=t,u.lastTime=n.slice(this[Wp]),u.lastLogger=this),u instanceof Fp?u.write(a):u.write(kp(a))}function dm(){let e=this[Ws];"flush"in e&&e.flush()}});var oa=m((fb,Y)=>{"use strict";var ym=require("os"),ea=cn(),pm=mn(),ta=os(),mm=Js(),ra=ke(),{assertDefaultLevelFound:hm,mappings:na,genLsCache:gm}=Tn(),{createArgsNormalizer:vm,asChindings:Sm,final:wm,stringify:ar,buildSafeSonicBoom:Fn,buildFormatters:bm,noop:Em}=or(),{version:Om}=Nn(),{chindingsSym:Ys,redactFmtSym:_m,serializersSym:Ks,timeSym:xm,timeSliceIndexSym:Pm,streamSym:Rm,stringifySym:Qs,stringifiersSym:Xs,setLevelSym:Am,endSym:Lm,formatOptsSym:qm,messageKeySym:Tm,nestedKeySym:Nm,mixinSym:Im,useOnlyCustomLevelsSym:Cm,formattersSym:Zs,hooksSym:Dm}=ra,{epochTime:ia,nullTime:Fm}=ta,{pid:km}=process,jm=ym.hostname(),Mm=ea.err,kn={level:"info",messageKey:"msg",nestedKey:null,enabled:!0,prettyPrint:!1,base:{pid:km,hostname:jm},serializers:Object.assign(Object.create(null),{err:Mm}),formatters:Object.assign(Object.create(null),{bindings(e){return e},level(e,t){return{level:t}}}),hooks:{logMethod:void 0},timestamp:ia,name:void 0,redact:null,customLevels:null,levelKey:void 0,useOnlyCustomLevels:!1},$m=vm(kn),Bm=Object.assign(Object.create(null),ea);function jn(...e){let t={},{opts:r,stream:n}=$m(t,...e),{redact:i,crlf:o,serializers:s,timestamp:a,messageKey:u,nestedKey:c,base:f,name:d,level:l,customLevels:y,useLevelLabels:p,changeLevelName:h,levelKey:g,mixin:S,useOnlyCustomLevels:A,formatters:q,hooks:M}=r,x=bm(q.level,q.bindings,q.log);p&&!(h||g)?(process.emitWarning("useLevelLabels is deprecated, use the formatters.level option instead","Warning","PINODEP001"),x.level=Hm):(h||g)&&!p?(process.emitWarning("changeLevelName and levelKey are deprecated, use the formatters.level option instead","Warning","PINODEP002"),x.level=Um(h||g)):(h||g)&&p&&(process.emitWarning("useLevelLabels is deprecated, use the formatters.level option instead","Warning","PINODEP001"),process.emitWarning("changeLevelName and levelKey are deprecated, use the formatters.level option instead","Warning","PINODEP002"),x.level=Wm(h||g)),s[Symbol.for("pino.*")]&&(process.emitWarning("The pino.* serializer is deprecated, use the formatters.log options instead","Warning","PINODEP003"),x.log=s[Symbol.for("pino.*")]),x.bindings||(x.bindings=kn.formatters.bindings),x.level||(x.level=kn.formatters.level);let I=i?pm(i,ar):{},v=i?{stringify:I[_m]}:{stringify:ar},E="}"+(o?`\r
`:`
`),w=Sm.bind(null,{[Ys]:"",[Ks]:s,[Xs]:I,[Qs]:ar,[Zs]:x}),O="";f!==null&&(d===void 0?O=w(f):O=w(Object.assign({},f,{name:d})));let T=a instanceof Function?a:a?ia:Fm,D=T().indexOf(":")+1;if(A&&!y)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(S&&typeof S!="function")throw Error(`Unknown mixin type "${typeof S}" - expected "function"`);hm(l,y,A);let N=na(y,A);return Object.assign(t,{levels:N,[Cm]:A,[Rm]:n,[xm]:T,[Pm]:D,[Qs]:ar,[Xs]:I,[Lm]:E,[qm]:v,[Tm]:u,[Nm]:c,[Ks]:s,[Im]:S,[Ys]:O,[Zs]:x,[Dm]:M,silent:Em}),Object.setPrototypeOf(t,mm()),gm(t),t[Am](l),t}function Hm(e,t){return{level:e}}function Um(e){return function(t,r){return{[e]:r}}}function Wm(e){return function(t,r){return{[e]:t}}}Y.exports=jn;Y.exports.extreme=(e=process.stdout.fd)=>(process.emitWarning("The pino.extreme() option is deprecated and will be removed in v7. Use pino.destination({ sync: false }) instead.",{code:"extreme_deprecation"}),Fn({dest:e,minLength:4096,sync:!1}));Y.exports.destination=(e=process.stdout.fd)=>typeof e=="object"?(e.dest=e.dest||process.stdout.fd,Fn(e)):Fn({dest:e,minLength:0,sync:!0});Y.exports.final=wm;Y.exports.levels=na();Y.exports.stdSerializers=Bm;Y.exports.stdTimeFunctions=Object.assign({},ta);Y.exports.symbols=ra;Y.exports.version=Om;Y.exports.default=jn;Y.exports.pino=jn});function zm(e,t){e.length>=2?t.apply(this,[e.map(r=>typeof r=="string"?"%s":"%j").join(" "),...e]):t.apply(this,e)}var ur,Gm,Vm,te,st,V,sa=L(()=>{"use strict";ur={awsTag:"userLogs"},Gm=require("util"),Vm=oa(),te={assert:console.assert,debug:console.debug,dir:console.dir,error:console.error,info:console.info,log:console.log,time:console.time,timeEnd:console.timeEnd,timeLog:console.timeLog,trace:console.trace,warn:console.warn},st={};V=class{static _assert(t,...r){t||console.info(...r)}static _dir(...t){console.info(Gm.inspect(...t))}static _time(t){st[t]=Date.now()}static _timeEnd(t){V._timeLog(t)}static _timeLog(t,...r){if(!st[t]){console.warn(`Warning: No such label '${t}' for console.timeEnd()`);return}let n=Date.now()-st[t];st[t]=Date.now(),console.info(`${t}: ${n}ms`,...r)}static enable({clientIp:t,requestId:r,wi:n}={}){st={};let i=Vm({base:{...ur,wi:n},timestamp:!0,hooks:{logMethod:zm}});t&&(i=i.child({clientIp:t})),r&&(i=i.child({requestId:r})),console.assert=V._assert,console.debug=i.debug.bind(i),console.dir=V._dir,console.error=i.error.bind(i),console.info=i.info.bind(i),console.log=i.info.bind(i),console.time=V._time,console.timeEnd=V._timeEnd,console.timeLog=V._timeLog,console.trace=i.trace.bind(i),console.warn=i.warn.bind(i)}static disable(){console.assert=te.assert,console.debug=te.debug,console.dir=te.dir,console.error=te.error,console.info=te.info,console.log=te.log,console.time=te.time,console.timeEnd=te.timeEnd,console.timeLog=te.timeLog,console.trace=te.trace,console.warn=te.warn}}});var ua={};be(ua,{ACTIONS:()=>Zm,BACKENDS:()=>ue,BROTLI_ENCODING:()=>pe,CACHEABLE_METHODS:()=>rh,CACHING_STATUS:()=>th,DEVTOOLS_PREFETCH_QUERY_PARAM:()=>oh,GZIP_ENCODING:()=>me,HEAD_QUERY_PARAM:()=>sh,HTTP_HEADERS:()=>P,HTTP_METHODS:()=>eh,IS_BROWSER:()=>yh,JS_BACKEND_HOSTNAME:()=>$n,LAYER0_ASSET_ALIASES_FILE:()=>Jm,LAYER0_CONFIG_FILE:()=>cr,LAYER0_DEPLOYMENT_TYPE_AWS:()=>Mn,LAYER0_ENV_VARIABLES:()=>ye,LAYER0_HEADERS_PREFIX:()=>Ym,LAYER0_IMAGE_OPTIMIZER_PATH:()=>dh,LAYER0_MAX_USER_HEADERS_ALLOWED:()=>Km,LAYER0_TOO_MANY_HEADERS_STATUS_CODE:()=>Qm,LAYER0_UNCACHED_PREFETCH_STATUS:()=>Xm,METHOD_QUERY_PARAM:()=>uh,POST_BODY_QUERY_PARAM:()=>ah,PREFETCH_QUERY_PARAM:()=>nh,PREFETCH_TTL_PARAM:()=>ih,ROUTES_CATCH_GROUP:()=>fh,ROUTES_FALLBACK:()=>ch,ROUTES_NOINDEX_GROUP:()=>lh,THROTTLED_QUERY_PARAM:()=>aa});var cr,Jm,ye,Mn,Ym,Km,Qm,Xm,Zm,ue,$n,eh,P,th,rh,aa,nh,ih,oh,sh,ah,uh,ch,fh,lh,dh,yh,pe,me,re=L(()=>{"use strict";cr="layer0.config.js",Jm="asset-aliases.json",ye={config:"LAYER0_CONFIG",deploymentType:"LAYER0_DEPLOYMENT_TYPE",versionOverride:"LAYER0_VERSION_OVERRIDE"},Mn="AWS",Ym="x-0-",Km=70,Qm=542,Xm=412,Zm={setHeader:"set-header",updateHeader:"update-header",removeHeader:"remove-header",syntheticRes:"synthetic-response",updatePath:"update-path",proxy:"proxy",addCookie:"add-cookie",updateCookie:"update-cookie",removeCookie:"remove-cookie"},ue={js:"__js__",static:"__static__",permanentStatic:"__permanent_static__",imageOptimizer:"__image_optimizer__"},$n="127.0.0.1",eh={head:"head",get:"get",post:"post",delete:"delete",put:"put",patch:"patch",options:"options"},P={acceptEncoding:"accept-encoding",authorization:"authorization",cacheControl:"cache-control",contentEncoding:"content-encoding",contentLength:"content-length",contentType:"content-type",cookie:"cookie",host:"host",location:"location",serverTiming:"server-timing",setCookie:"set-cookie",userAgent:"user-agent",vary:"vary",via:"via",x0Browser:"x-0-browser",x0CacheControl:"x-0-cache-control",x0CacheVersion:"x-0-cache-version",x0CachingStatus:"x-0-caching-status",x0ClientIp:"x-0-client-ip",x0Components:"x-0-components",x0Destination:"x-0-destination",x0Device:"x-0-device",x0DeviceIsBot:"x-0-device-is-bot",x0GeoCity:"x-0-geo-city",x0GeoCountryCode:"x-0-geo-country-code",x0GeoLatitude:"x-0-geo-latitude",x0GeoLongitude:"x-0-geo-longitude",x0GeoPostalCode:"x-0-geo-postal-code",x0MatchedRoutes:"x-0-matched-routes",x0Protocol:"x-0-protocol",x0Route:"x-0-route",x0Status:"x-0-status",x0SurrogateKey:"x-0-surrogate-key",x0T:"x-0-t",x0UserT:"x-0-user-t",x0Vendor:"x-0-vendor",x0Version:"x-0-version",xForwardedFor:"x-forwarded-for",xRequestId:"x-request-id",xSwCacheControl:"x-sw-cache-control"},th={ok:"ok",private:"private",method:"method",bodyTooBig:"body-too-big",code:"code",setCookie:"set-cookie",noMaxAge:"no-max-age"},rh=new Set(["get","head"]),aa="layer0_prefetch",nh=aa,ih="layer0_prefetch_ttl",oh="layer0_dt_pf",sh="layer0_head",ah="pref_layer0_body",uh="pref_layer0_method",ch="fallback",fh="catch",lh="noindex",dh="/__layer0_image_optimizer",yh=typeof window<"u",pe="br",me="gzip"});var fa={};be(fa,{isBrowser:()=>mh,isCloud:()=>fr,isLayer0RunDev:()=>ph,isLocal:()=>at,isProductionBuild:()=>ca});function fr(){return process.env[ye.deploymentType]===Mn}function at(){return process.env.LAYER0_LOCAL==="true"}function ca(){return process.env.NODE_ENV==="production"}function ph(){return!fr()&&!ca()}function mh(){return typeof window<"u"}var ut=L(()=>{"use strict";re()});var ya={};be(ya,{deepRequestInspectionLogger:()=>Hn,default:()=>yr});function Sh(e){return e.indexOf(vh)>=0}function Hn(e){function t(a,u){try{process.env.LAYER0_HTTP_REQUEST_LOGGING==="1"&&(dr.stdoutWrite.apply(process.stdout,[JSON.stringify({level:u,time:Date.now(),wi:e.id,...Bn,data:a})]),dr.stdoutWrite.apply(process.stdout,[`
`]))}catch(c){console.error(`Error while logging HTTP request info at level ${u}: ${c&&c.message}`)}}function r(a){return t(a,wh)}function n(a){return t(a,bh)}function i(a){return t(a,Eh)}function o(a){return t(a,Oh)}function s(a){return t(a,_h)}return{logDownstreamRequestInfo:r,logDownstreamResponseInfo:n,logUpstreamRequestInfo:i,logUpstreamResponseInfo:o,logUpstreamResponseBodyInfo:s}}function da(e,t){let r=e.write;e.write=function(n,...i){let o;typeof n=="object"?o=Buffer.from(n).toString():o=n;let s={time:Date.now()};return n&&!Sh(o)&&(n=JSON.stringify({...t,...s,msg:o})+`
`),r.apply(e,[n,...i])}}var la,dr,hh,gh,lr,vh,wh,bh,Eh,Oh,_h,Bn,xh,yr,Un=L(()=>{"use strict";sa();la=(ut(),Oe(fa)),dr={stdoutWrite:process.stdout.write,stderrWrite:process.stderr.write},hh=50,gh=30,lr=0,vh=JSON.stringify(ur).replace("{","").replace("}","");wh=100,bh=101,Eh=102,Oh=103,_h=104,Bn={};xh={enable:({clientIp:e,requestId:t,wi:r}={})=>{if(!!la.isCloud()){if(lr===0){let n=ur;e&&(n={...n,clientIp:e}),t&&(n={...n,requestId:t}),r&&(n={...n,wi:r}),Bn=n,da(process.stdout,{level:gh,...n}),da(process.stderr,{level:hh,...n}),V.enable({clientIp:e,requestId:t,wi:r})}lr++}},disable:()=>{!la.isCloud()||(lr--,lr===0&&(process.stdout.write=dr.stdoutWrite,process.stderr.write=dr.stderrWrite,Bn={},V.disable()))}},yr=xh});var ma={};be(ma,{default:()=>ct});function Wn(e){return Buffer.from(e).toString("base64")}function Ph(e){if(!e)return;let t=e[P.contentEncoding];if(!t){for(let r of Object.keys(e))if(r.toLowerCase()===P.contentEncoding){t=e[r];break}}return Array.isArray(t)&&(t.length?t=t[0]:t=void 0),t}function ct(e,t){var r;try{if(!e||e.length===0)return{};let n;if(typeof e=="string")n=Buffer.from(e,"base64");else if(Buffer.isBuffer(e))n=e;else if(Array.isArray(e))n=Buffer.concat(e);else return{body:Wn(`Unknown body format: ${typeof e}`),bodyLength:e.length,bodyTruncated:!0};let i=(r=Ph(t))==null?void 0:r.toLowerCase();try{switch(i){case me:{n=(0,pr.gunzipSync)(n);break}case pe:{n=(0,pr.brotliDecompressSync)(n);break}default:}}catch(o){return{body:Wn(`Error while decompressing the body [${i}]: ${o.message}`),bodyLength:n.length,bodyTruncated:!0}}return{body:n.slice(0,pa).toString("base64"),bodyLength:n.length,bodyTruncated:n.length>pa}}catch(n){return{body:Wn(`Error while getting body logging data: ${n&&n.message}`),bodyLength:e.length,bodyTruncated:!0}}}var pr,pa,Gn=L(()=>{"use strict";pr=require("zlib");re();pa=8*1024});var xa=m((mb,_a)=>{"use strict";var{inherits:Rh}=require("util"),{deepRequestInspectionLogger:Ah}=(Un(),Oe(ya)),hr=require("http"),ha=require("https"),Lh=require("url"),{HTTP_HEADERS:$e}=(re(),Oe(ua)),ga=(Gn(),Oe(ma)).default,qh=/^xdn-user-assets-[a-zA-Z0-9-]+-[0-9]+\.s3\.amazonaws\.com$/;function va(e){let t={protocol:e.protocol,hostname:typeof e.hostname=="string"&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return e.port!==""&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username}:${e.password}`),t}var Sa=!1,Th=Symbol("query"),Vn=Th;function wa(e,t,r){if(typeof e=="string"){let n=e;try{e=va(new URL(n))}catch(i){if(e=Lh.parse(n),!e.hostname)throw i;!Sa&&!process.noDeprecation&&(Sa=!0,process.emitWarning(`The provided URL ${n} is not a valid URL, and is supported in the http module solely for compatibility.`,"DeprecationWarning","DEP0109"))}}else e&&e[Vn]&&e[Vn][Vn]?e=va(e):(r=t,t=e,e=null);return typeof t=="function"?(r=t,t=e||{}):t=Object.assign(e||{},t),{options:t,callback:r}}var zn=hr.ClientRequest,ba=0,mr=[],ft={},Ea="Layer0",Oa=null;function Nh(e){let t=null,r=e&&e.multiValueHeaders||{};for(let[n,i]of Object.entries(r))if(n.toLowerCase()===$e.via){t=i;break}return t||(t="Layer0"),/\bLayer0\b/.test(t)||(t=t+", Layer0"),t}function Ih(e){let t=e&&e.multiValueHeaders||{};for(let[r,n]of Object.entries(t))if(r.toLowerCase()===$e.x0CacheVersion)return n}function Ch(e,t,r){for(let n of Object.keys(e)){let i=n.toLowerCase();(i===$e.via||i===$e.x0CacheVersion)&&delete e[n]}t&&(e[$e.via]=t),r&&(e[$e.x0CacheVersion]=r)}function Jn(...e){let{options:t,callback:r}=wa(...e);t.headers||(t.headers={}),Ch(t.headers,Ea,Oa);let n=t.hostname||t.host;if(n&&(["127.0.0.1","0.0.0.0","::1","0:0:0:0:0:0:0:1","localhost"].includes(n)||qh.test(n)))zn.call(this,t,r);else{let o=Dh(this,t,r);zn.call(this,t,o)}}function Dh(e,t,r){let n=ba++;mr[n]=Date.now();let i={method:t.method,protocol:t.protocol,host:t.hostname||t.host,port:t.port,path:t.path},o=new Ah(ft.lambdaInstance),s=c=>{let f=[];if(c.once("end",()=>{o.logUpstreamResponseBodyInfo({id:n,...i,...ga(f,c.headers)})}),ft.enableHttpRequestLogging){o.logUpstreamResponseInfo({id:n,...i,statusCode:c.statusCode,statusMessage:c.statusMessage,headers:c.headers,duration:Date.now()-mr[n]});let d,{setEncoding:l}=c;c.setEncoding=function(p){return d=p,l.apply(this,arguments)};let y=c.push;c.push=function(p){return p&&(d&&(p=Buffer.from(p,d)),f.push(p)),y.call(c,p)}}r&&r(c)},a=[],u=function(c,f){if(Buffer.isBuffer(c)||typeof c=="string"){let d=c;Buffer.isBuffer(d)||(typeof f!="string"&&(f=null),d=Buffer.from(c,f)),a.push(d)}};return e.write=function(c,f,d){return u(c,f),Object.getPrototypeOf(Object.getPrototypeOf(e)).write.call(e,c,f,d)}.bind(e),e.end=function(c,f,d){return u(c,f),ft.enableHttpRequestLogging&&o.logUpstreamRequestInfo({id:n,...i,headers:t.headers,...ga(a,t.headers)}),Object.getPrototypeOf(Object.getPrototypeOf(e)).end.call(e,c,f,d)}.bind(e),e.once("error",c=>{ft.enableHttpRequestLogging&&o.logUpstreamResponseInfo({id:n,...i,duration:Date.now()-mr[n],code:c&&c.code,error:c&&c.message})}),s}Rh(Jn,hr.ClientRequest);var Yn=zn;hr.request=function(t,r,n){return new Yn(t,r,n)};ha.request=function(...t){let{options:r,callback:n}=wa(...t);return r._defaultAgent=ha.globalAgent,new Yn(r,n)};Yn=Jn;hr.ClientRequest=Jn;function Fh(e,t){ba=0,mr=[],ft=t||{},Ea=Nh(e),Oa=Ih(e)}_a.exports={interceptRequests:Fh}});var W=m(Kn=>{"use strict";Kn.fromCallback=function(e){return Object.defineProperty(function(){if(typeof arguments[arguments.length-1]=="function")e.apply(this,arguments);else return new Promise((t,r)=>{arguments[arguments.length]=(n,i)=>{if(n)return r(n);t(i)},arguments.length++,e.apply(this,arguments)})},"name",{value:e.name})};Kn.fromPromise=function(e){return Object.defineProperty(function(){let t=arguments[arguments.length-1];if(typeof t!="function")return e.apply(this,arguments);e.apply(this,arguments).then(r=>t(null,r),t)},"name",{value:e.name})}});var Ra=m((gb,Pa)=>{var he=require("constants"),kh=process.cwd,gr=null,jh=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return gr||(gr=kh.call(process)),gr};try{process.cwd()}catch{}var Mh=process.chdir;process.chdir=function(e){gr=null,Mh.call(process,e)};Pa.exports=$h;function $h(e){he.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||r(e),e.chown=o(e.chown),e.fchown=o(e.fchown),e.lchown=o(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=s(e.chownSync),e.fchownSync=s(e.fchownSync),e.lchownSync=s(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=a(e.stat),e.fstat=a(e.fstat),e.lstat=a(e.lstat),e.statSync=u(e.statSync),e.fstatSync=u(e.fstatSync),e.lstatSync=u(e.lstatSync),e.lchmod||(e.lchmod=function(f,d,l){l&&process.nextTick(l)},e.lchmodSync=function(){}),e.lchown||(e.lchown=function(f,d,l,y){y&&process.nextTick(y)},e.lchownSync=function(){}),jh==="win32"&&(e.rename=function(f){return function(d,l,y){var p=Date.now(),h=0;f(d,l,function g(S){if(S&&(S.code==="EACCES"||S.code==="EPERM")&&Date.now()-p<6e4){setTimeout(function(){e.stat(l,function(A,q){A&&A.code==="ENOENT"?f(d,l,g):y(S)})},h),h<100&&(h+=10);return}y&&y(S)})}}(e.rename)),e.read=function(f){function d(l,y,p,h,g,S){var A;if(S&&typeof S=="function"){var q=0;A=function(M,x,I){if(M&&M.code==="EAGAIN"&&q<10)return q++,f.call(e,l,y,p,h,g,A);S.apply(this,arguments)}}return f.call(e,l,y,p,h,g,A)}return d.__proto__=f,d}(e.read),e.readSync=function(f){return function(d,l,y,p,h){for(var g=0;;)try{return f.call(e,d,l,y,p,h)}catch(S){if(S.code==="EAGAIN"&&g<10){g++;continue}throw S}}}(e.readSync);function t(f){f.lchmod=function(d,l,y){f.open(d,he.O_WRONLY|he.O_SYMLINK,l,function(p,h){if(p){y&&y(p);return}f.fchmod(h,l,function(g){f.close(h,function(S){y&&y(g||S)})})})},f.lchmodSync=function(d,l){var y=f.openSync(d,he.O_WRONLY|he.O_SYMLINK,l),p=!0,h;try{h=f.fchmodSync(y,l),p=!1}finally{if(p)try{f.closeSync(y)}catch{}else f.closeSync(y)}return h}}function r(f){he.hasOwnProperty("O_SYMLINK")?(f.lutimes=function(d,l,y,p){f.open(d,he.O_SYMLINK,function(h,g){if(h){p&&p(h);return}f.futimes(g,l,y,function(S){f.close(g,function(A){p&&p(S||A)})})})},f.lutimesSync=function(d,l,y){var p=f.openSync(d,he.O_SYMLINK),h,g=!0;try{h=f.futimesSync(p,l,y),g=!1}finally{if(g)try{f.closeSync(p)}catch{}else f.closeSync(p)}return h}):(f.lutimes=function(d,l,y,p){p&&process.nextTick(p)},f.lutimesSync=function(){})}function n(f){return f&&function(d,l,y){return f.call(e,d,l,function(p){c(p)&&(p=null),y&&y.apply(this,arguments)})}}function i(f){return f&&function(d,l){try{return f.call(e,d,l)}catch(y){if(!c(y))throw y}}}function o(f){return f&&function(d,l,y,p){return f.call(e,d,l,y,function(h){c(h)&&(h=null),p&&p.apply(this,arguments)})}}function s(f){return f&&function(d,l,y){try{return f.call(e,d,l,y)}catch(p){if(!c(p))throw p}}}function a(f){return f&&function(d,l,y){typeof l=="function"&&(y=l,l=null);function p(h,g){g&&(g.uid<0&&(g.uid+=4294967296),g.gid<0&&(g.gid+=4294967296)),y&&y.apply(this,arguments)}return l?f.call(e,d,l,p):f.call(e,d,p)}}function u(f){return f&&function(d,l){var y=l?f.call(e,d,l):f.call(e,d);return y.uid<0&&(y.uid+=4294967296),y.gid<0&&(y.gid+=4294967296),y}}function c(f){if(!f||f.code==="ENOSYS")return!0;var d=!process.getuid||process.getuid()!==0;return!!(d&&(f.code==="EINVAL"||f.code==="EPERM"))}}});var qa=m((vb,La)=>{var Aa=require("stream").Stream;La.exports=Bh;function Bh(e){return{ReadStream:t,WriteStream:r};function t(n,i){if(!(this instanceof t))return new t(n,i);Aa.call(this);var o=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var s=Object.keys(i),a=0,u=s.length;a<u;a++){var c=s[a];this[c]=i[c]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){o._read()});return}e.open(this.path,this.flags,this.mode,function(f,d){if(f){o.emit("error",f),o.readable=!1;return}o.fd=d,o.emit("open",d),o._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);Aa.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),s=0,a=o.length;s<a;s++){var u=o[s];this[u]=i[u]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var Na=m((Sb,Ta)=>{"use strict";Ta.exports=Hh;function Hh(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:e.__proto__};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}});var C=m((wb,Xn)=>{var ce=require("fs"),Uh=Ra(),Wh=qa(),Gh=Na(),vr=require("util"),ge,Sr;typeof Symbol=="function"&&typeof Symbol.for=="function"?(ge=Symbol.for("graceful-fs.queue"),Sr=Symbol.for("graceful-fs.previous")):(ge="___graceful-fs.queue",Sr="___graceful-fs.previous");function Vh(){}var dt=Vh;vr.debuglog?dt=vr.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(dt=function(){var e=vr.format.apply(vr,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});global[ge]||(Ia=[],Object.defineProperty(global,ge,{get:function(){return Ia}}),ce.close=function(e){function t(r,n){return e.call(ce,r,function(i){i||Le(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(t,Sr,{value:e}),t}(ce.close),ce.closeSync=function(e){function t(r){e.apply(ce,arguments),Le()}return Object.defineProperty(t,Sr,{value:e}),t}(ce.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){dt(global[ge]),require("assert").equal(global[ge].length,0)}));var Ia;Xn.exports=Qn(Gh(ce));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!ce.__patched&&(Xn.exports=Qn(ce),ce.__patched=!0);function Qn(e){Uh(e),e.gracefulify=Qn,e.createReadStream=q,e.createWriteStream=M;var t=e.readFile;e.readFile=r;function r(v,E,w){return typeof E=="function"&&(w=E,E=null),O(v,E,w);function O(T,D,N){return t(T,D,function(J){J&&(J.code==="EMFILE"||J.code==="ENFILE")?lt([O,[T,D,N]]):(typeof N=="function"&&N.apply(this,arguments),Le())})}}var n=e.writeFile;e.writeFile=i;function i(v,E,w,O){return typeof w=="function"&&(O=w,w=null),T(v,E,w,O);function T(D,N,J,X){return n(D,N,J,function(Z){Z&&(Z.code==="EMFILE"||Z.code==="ENFILE")?lt([T,[D,N,J,X]]):(typeof X=="function"&&X.apply(this,arguments),Le())})}}var o=e.appendFile;o&&(e.appendFile=s);function s(v,E,w,O){return typeof w=="function"&&(O=w,w=null),T(v,E,w,O);function T(D,N,J,X){return o(D,N,J,function(Z){Z&&(Z.code==="EMFILE"||Z.code==="ENFILE")?lt([T,[D,N,J,X]]):(typeof X=="function"&&X.apply(this,arguments),Le())})}}var a=e.readdir;e.readdir=u;function u(v,E,w){var O=[v];return typeof E!="function"?O.push(E):w=E,O.push(T),c(O);function T(D,N){N&&N.sort&&N.sort(),D&&(D.code==="EMFILE"||D.code==="ENFILE")?lt([c,[O]]):(typeof w=="function"&&w.apply(this,arguments),Le())}}function c(v){return a.apply(e,v)}if(process.version.substr(0,4)==="v0.8"){var f=Wh(e);h=f.ReadStream,S=f.WriteStream}var d=e.ReadStream;d&&(h.prototype=Object.create(d.prototype),h.prototype.open=g);var l=e.WriteStream;l&&(S.prototype=Object.create(l.prototype),S.prototype.open=A),Object.defineProperty(e,"ReadStream",{get:function(){return h},set:function(v){h=v},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return S},set:function(v){S=v},enumerable:!0,configurable:!0});var y=h;Object.defineProperty(e,"FileReadStream",{get:function(){return y},set:function(v){y=v},enumerable:!0,configurable:!0});var p=S;Object.defineProperty(e,"FileWriteStream",{get:function(){return p},set:function(v){p=v},enumerable:!0,configurable:!0});function h(v,E){return this instanceof h?(d.apply(this,arguments),this):h.apply(Object.create(h.prototype),arguments)}function g(){var v=this;I(v.path,v.flags,v.mode,function(E,w){E?(v.autoClose&&v.destroy(),v.emit("error",E)):(v.fd=w,v.emit("open",w),v.read())})}function S(v,E){return this instanceof S?(l.apply(this,arguments),this):S.apply(Object.create(S.prototype),arguments)}function A(){var v=this;I(v.path,v.flags,v.mode,function(E,w){E?(v.destroy(),v.emit("error",E)):(v.fd=w,v.emit("open",w))})}function q(v,E){return new e.ReadStream(v,E)}function M(v,E){return new e.WriteStream(v,E)}var x=e.open;e.open=I;function I(v,E,w,O){return typeof w=="function"&&(O=w,w=null),T(v,E,w,O);function T(D,N,J,X){return x(D,N,J,function(Z,lw){Z&&(Z.code==="EMFILE"||Z.code==="ENFILE")?lt([T,[D,N,J,X]]):(typeof X=="function"&&X.apply(this,arguments),Le())})}}return e}function lt(e){dt("ENQUEUE",e[0].name,e[1]),global[ge].push(e)}function Le(){var e=global[ge].shift();e&&(dt("RETRY",e[0].name,e[1]),e[0].apply(null,e[1]))}});var Zn=m(qe=>{"use strict";var Ca=W().fromCallback,K=C(),zh=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","lchmod","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof K[e]=="function");Object.keys(K).forEach(e=>{e!=="promises"&&(qe[e]=K[e])});zh.forEach(e=>{qe[e]=Ca(K[e])});qe.exists=function(e,t){return typeof t=="function"?K.exists(e,t):new Promise(r=>K.exists(e,r))};qe.read=function(e,t,r,n,i,o){return typeof o=="function"?K.read(e,t,r,n,i,o):new Promise((s,a)=>{K.read(e,t,r,n,i,(u,c,f)=>{if(u)return a(u);s({bytesRead:c,buffer:f})})})};qe.write=function(e,t,...r){return typeof r[r.length-1]=="function"?K.write(e,t,...r):new Promise((n,i)=>{K.write(e,t,...r,(o,s,a)=>{if(o)return i(o);n({bytesWritten:s,buffer:a})})})};typeof K.realpath.native=="function"&&(qe.realpath.native=Ca(K.realpath.native))});var ti=m((Eb,Fa)=>{"use strict";var ei=require("path");function Da(e){return e=ei.normalize(ei.resolve(e)).split(ei.sep),e.length>0?e[0]:null}var Jh=/[<>:"|?*]/;function Yh(e){let t=Da(e);return e=e.replace(t,""),Jh.test(e)}Fa.exports={getRootPath:Da,invalidWin32Path:Yh}});var ja=m((Ob,ka)=>{"use strict";var Kh=C(),ri=require("path"),Qh=ti().invalidWin32Path,Xh=parseInt("0777",8);function ni(e,t,r,n){if(typeof t=="function"?(r=t,t={}):(!t||typeof t!="object")&&(t={mode:t}),process.platform==="win32"&&Qh(e)){let s=new Error(e+" contains invalid WIN32 path characters.");return s.code="EINVAL",r(s)}let i=t.mode,o=t.fs||Kh;i===void 0&&(i=Xh&~process.umask()),n||(n=null),r=r||function(){},e=ri.resolve(e),o.mkdir(e,i,s=>{if(!s)return n=n||e,r(null,n);switch(s.code){case"ENOENT":if(ri.dirname(e)===e)return r(s);ni(ri.dirname(e),t,(a,u)=>{a?r(a,u):ni(e,t,r,u)});break;default:o.stat(e,(a,u)=>{a||!u.isDirectory()?r(s,n):r(null,n)});break}})}ka.exports=ni});var $a=m((_b,Ma)=>{"use strict";var Zh=C(),ii=require("path"),eg=ti().invalidWin32Path,tg=parseInt("0777",8);function oi(e,t,r){(!t||typeof t!="object")&&(t={mode:t});let n=t.mode,i=t.fs||Zh;if(process.platform==="win32"&&eg(e)){let o=new Error(e+" contains invalid WIN32 path characters.");throw o.code="EINVAL",o}n===void 0&&(n=tg&~process.umask()),r||(r=null),e=ii.resolve(e);try{i.mkdirSync(e,n),r=r||e}catch(o){if(o.code==="ENOENT"){if(ii.dirname(e)===e)throw o;r=oi(ii.dirname(e),t,r),oi(e,t,r)}else{let s;try{s=i.statSync(e)}catch{throw o}if(!s.isDirectory())throw o}}return r}Ma.exports=oi});var z=m((xb,Ba)=>{"use strict";var rg=W().fromCallback,si=rg(ja()),ai=$a();Ba.exports={mkdirs:si,mkdirsSync:ai,mkdirp:si,mkdirpSync:ai,ensureDir:si,ensureDirSync:ai}});var ui=m((Pb,Ua)=>{"use strict";var $=C(),Ha=require("os"),wr=require("path");function ng(){let e=wr.join("millis-test-sync"+Date.now().toString()+Math.random().toString().slice(2));e=wr.join(Ha.tmpdir(),e);let t=new Date(1435410243862);$.writeFileSync(e,"https://github.com/jprichardson/node-fs-extra/pull/141");let r=$.openSync(e,"r+");return $.futimesSync(r,t,t),$.closeSync(r),$.statSync(e).mtime>1435410243e3}function ig(e){let t=wr.join("millis-test"+Date.now().toString()+Math.random().toString().slice(2));t=wr.join(Ha.tmpdir(),t);let r=new Date(1435410243862);$.writeFile(t,"https://github.com/jprichardson/node-fs-extra/pull/141",n=>{if(n)return e(n);$.open(t,"r+",(i,o)=>{if(i)return e(i);$.futimes(o,r,r,s=>{if(s)return e(s);$.close(o,a=>{if(a)return e(a);$.stat(t,(u,c)=>{if(u)return e(u);e(null,c.mtime>1435410243e3)})})})})})}function og(e){if(typeof e=="number")return Math.floor(e/1e3)*1e3;if(e instanceof Date)return new Date(Math.floor(e.getTime()/1e3)*1e3);throw new Error("fs-extra: timeRemoveMillis() unknown parameter type")}function sg(e,t,r,n){$.open(e,"r+",(i,o)=>{if(i)return n(i);$.futimes(o,t,r,s=>{$.close(o,a=>{n&&n(s||a)})})})}function ag(e,t,r){let n=$.openSync(e,"r+");return $.futimesSync(n,t,r),$.closeSync(n)}Ua.exports={hasMillisRes:ig,hasMillisResSync:ng,timeRemoveMillis:og,utimesMillis:sg,utimesMillisSync:ag}});var mt=m((Rb,Ya)=>{"use strict";var Q=C(),G=require("path"),Wa=10,Ga=5,ug=0,fi=process.versions.node.split("."),Va=Number.parseInt(fi[0],10),za=Number.parseInt(fi[1],10),cg=Number.parseInt(fi[2],10);function yt(){if(Va>Wa)return!0;if(Va===Wa){if(za>Ga)return!0;if(za===Ga&&cg>=ug)return!0}return!1}function fg(e,t,r){yt()?Q.stat(e,{bigint:!0},(n,i)=>{if(n)return r(n);Q.stat(t,{bigint:!0},(o,s)=>o?o.code==="ENOENT"?r(null,{srcStat:i,destStat:null}):r(o):r(null,{srcStat:i,destStat:s}))}):Q.stat(e,(n,i)=>{if(n)return r(n);Q.stat(t,(o,s)=>o?o.code==="ENOENT"?r(null,{srcStat:i,destStat:null}):r(o):r(null,{srcStat:i,destStat:s}))})}function lg(e,t){let r,n;yt()?r=Q.statSync(e,{bigint:!0}):r=Q.statSync(e);try{yt()?n=Q.statSync(t,{bigint:!0}):n=Q.statSync(t)}catch(i){if(i.code==="ENOENT")return{srcStat:r,destStat:null};throw i}return{srcStat:r,destStat:n}}function dg(e,t,r,n){fg(e,t,(i,o)=>{if(i)return n(i);let{srcStat:s,destStat:a}=o;return a&&a.ino&&a.dev&&a.ino===s.ino&&a.dev===s.dev?n(new Error("Source and destination must not be the same.")):s.isDirectory()&&li(e,t)?n(new Error(pt(e,t,r))):n(null,{srcStat:s,destStat:a})})}function yg(e,t,r){let{srcStat:n,destStat:i}=lg(e,t);if(i&&i.ino&&i.dev&&i.ino===n.ino&&i.dev===n.dev)throw new Error("Source and destination must not be the same.");if(n.isDirectory()&&li(e,t))throw new Error(pt(e,t,r));return{srcStat:n,destStat:i}}function ci(e,t,r,n,i){let o=G.resolve(G.dirname(e)),s=G.resolve(G.dirname(r));if(s===o||s===G.parse(s).root)return i();yt()?Q.stat(s,{bigint:!0},(a,u)=>a?a.code==="ENOENT"?i():i(a):u.ino&&u.dev&&u.ino===t.ino&&u.dev===t.dev?i(new Error(pt(e,r,n))):ci(e,t,s,n,i)):Q.stat(s,(a,u)=>a?a.code==="ENOENT"?i():i(a):u.ino&&u.dev&&u.ino===t.ino&&u.dev===t.dev?i(new Error(pt(e,r,n))):ci(e,t,s,n,i))}function Ja(e,t,r,n){let i=G.resolve(G.dirname(e)),o=G.resolve(G.dirname(r));if(o===i||o===G.parse(o).root)return;let s;try{yt()?s=Q.statSync(o,{bigint:!0}):s=Q.statSync(o)}catch(a){if(a.code==="ENOENT")return;throw a}if(s.ino&&s.dev&&s.ino===t.ino&&s.dev===t.dev)throw new Error(pt(e,r,n));return Ja(e,t,o,n)}function li(e,t){let r=G.resolve(e).split(G.sep).filter(i=>i),n=G.resolve(t).split(G.sep).filter(i=>i);return r.reduce((i,o,s)=>i&&n[s]===o,!0)}function pt(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}Ya.exports={checkPaths:dg,checkPathsSync:yg,checkParentPaths:ci,checkParentPathsSync:Ja,isSrcSubdir:li}});var Qa=m((Ab,Ka)=>{"use strict";Ka.exports=function(e){if(typeof Buffer.allocUnsafe=="function")try{return Buffer.allocUnsafe(e)}catch{return new Buffer(e)}return new Buffer(e)}});var ru=m((Lb,tu)=>{"use strict";var R=C(),ht=require("path"),pg=z().mkdirsSync,mg=ui().utimesMillisSync,gt=mt();function hg(e,t,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;

    see https://github.com/jprichardson/node-fs-extra/issues/269`);let{srcStat:n,destStat:i}=gt.checkPathsSync(e,t,"copy");return gt.checkParentPathsSync(e,n,t,"copy"),gg(i,e,t,r)}function gg(e,t,r,n){if(n.filter&&!n.filter(t,r))return;let i=ht.dirname(r);return R.existsSync(i)||pg(i),Xa(e,t,r,n)}function Xa(e,t,r,n){if(!(n.filter&&!n.filter(t,r)))return vg(e,t,r,n)}function vg(e,t,r,n){let o=(n.dereference?R.statSync:R.lstatSync)(t);if(o.isDirectory())return Eg(o,e,t,r,n);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return Sg(o,e,t,r,n);if(o.isSymbolicLink())return xg(e,t,r,n)}function Sg(e,t,r,n,i){return t?wg(e,r,n,i):Za(e,r,n,i)}function wg(e,t,r,n){if(n.overwrite)return R.unlinkSync(r),Za(e,t,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}function Za(e,t,r,n){return typeof R.copyFileSync=="function"?(R.copyFileSync(t,r),R.chmodSync(r,e.mode),n.preserveTimestamps?mg(r,e.atime,e.mtime):void 0):bg(e,t,r,n)}function bg(e,t,r,n){let o=Qa()(65536),s=R.openSync(t,"r"),a=R.openSync(r,"w",e.mode),u=0;for(;u<e.size;){let c=R.readSync(s,o,0,65536,u);R.writeSync(a,o,0,c),u+=c}n.preserveTimestamps&&R.futimesSync(a,e.atime,e.mtime),R.closeSync(s),R.closeSync(a)}function Eg(e,t,r,n,i){if(!t)return Og(e,r,n,i);if(t&&!t.isDirectory())throw new Error(`Cannot overwrite non-directory '${n}' with directory '${r}'.`);return eu(r,n,i)}function Og(e,t,r,n){return R.mkdirSync(r),eu(t,r,n),R.chmodSync(r,e.mode)}function eu(e,t,r){R.readdirSync(e).forEach(n=>_g(n,e,t,r))}function _g(e,t,r,n){let i=ht.join(t,e),o=ht.join(r,e),{destStat:s}=gt.checkPathsSync(i,o,"copy");return Xa(s,i,o,n)}function xg(e,t,r,n){let i=R.readlinkSync(t);if(n.dereference&&(i=ht.resolve(process.cwd(),i)),e){let o;try{o=R.readlinkSync(r)}catch(s){if(s.code==="EINVAL"||s.code==="UNKNOWN")return R.symlinkSync(i,r);throw s}if(n.dereference&&(o=ht.resolve(process.cwd(),o)),gt.isSrcSubdir(i,o))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${o}'.`);if(R.statSync(r).isDirectory()&&gt.isSrcSubdir(o,i))throw new Error(`Cannot overwrite '${o}' with '${i}'.`);return Pg(i,r)}else return R.symlinkSync(i,r)}function Pg(e,t){return R.unlinkSync(t),R.symlinkSync(e,t)}tu.exports=hg});var di=m((qb,nu)=>{"use strict";nu.exports={copySync:ru()}});var fe=m((Tb,ou)=>{"use strict";var Rg=W().fromPromise,iu=Zn();function Ag(e){return iu.access(e).then(()=>!0).catch(()=>!1)}ou.exports={pathExists:Rg(Ag),pathExistsSync:iu.existsSync}});var pu=m((Nb,yu)=>{"use strict";var j=C(),vt=require("path"),Lg=z().mkdirs,qg=fe().pathExists,Tg=ui().utimesMillis,St=mt();function Ng(e,t,r,n){typeof r=="function"&&!n?(n=r,r={}):typeof r=="function"&&(r={filter:r}),n=n||function(){},r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;

    see https://github.com/jprichardson/node-fs-extra/issues/269`),St.checkPaths(e,t,"copy",(i,o)=>{if(i)return n(i);let{srcStat:s,destStat:a}=o;St.checkParentPaths(e,s,t,"copy",u=>u?n(u):r.filter?uu(su,a,e,t,r,n):su(a,e,t,r,n))})}function su(e,t,r,n,i){let o=vt.dirname(r);qg(o,(s,a)=>{if(s)return i(s);if(a)return yi(e,t,r,n,i);Lg(o,u=>u?i(u):yi(e,t,r,n,i))})}function uu(e,t,r,n,i,o){Promise.resolve(i.filter(r,n)).then(s=>s?e(t,r,n,i,o):o(),s=>o(s))}function yi(e,t,r,n,i){return n.filter?uu(au,e,t,r,n,i):au(e,t,r,n,i)}function au(e,t,r,n,i){(n.dereference?j.stat:j.lstat)(t,(s,a)=>{if(s)return i(s);if(a.isDirectory())return Fg(a,e,t,r,n,i);if(a.isFile()||a.isCharacterDevice()||a.isBlockDevice())return Ig(a,e,t,r,n,i);if(a.isSymbolicLink())return Mg(e,t,r,n,i)})}function Ig(e,t,r,n,i,o){return t?Cg(e,r,n,i,o):cu(e,r,n,i,o)}function Cg(e,t,r,n,i){if(n.overwrite)j.unlink(r,o=>o?i(o):cu(e,t,r,n,i));else return n.errorOnExist?i(new Error(`'${r}' already exists`)):i()}function cu(e,t,r,n,i){return typeof j.copyFile=="function"?j.copyFile(t,r,o=>o?i(o):fu(e,r,n,i)):Dg(e,t,r,n,i)}function Dg(e,t,r,n,i){let o=j.createReadStream(t);o.on("error",s=>i(s)).once("open",()=>{let s=j.createWriteStream(r,{mode:e.mode});s.on("error",a=>i(a)).on("open",()=>o.pipe(s)).once("close",()=>fu(e,r,n,i))})}function fu(e,t,r,n){j.chmod(t,e.mode,i=>i?n(i):r.preserveTimestamps?Tg(t,e.atime,e.mtime,n):n())}function Fg(e,t,r,n,i,o){return t?t&&!t.isDirectory()?o(new Error(`Cannot overwrite non-directory '${n}' with directory '${r}'.`)):lu(r,n,i,o):kg(e,r,n,i,o)}function kg(e,t,r,n,i){j.mkdir(r,o=>{if(o)return i(o);lu(t,r,n,s=>s?i(s):j.chmod(r,e.mode,i))})}function lu(e,t,r,n){j.readdir(e,(i,o)=>i?n(i):du(o,e,t,r,n))}function du(e,t,r,n,i){let o=e.pop();return o?jg(e,o,t,r,n,i):i()}function jg(e,t,r,n,i,o){let s=vt.join(r,t),a=vt.join(n,t);St.checkPaths(s,a,"copy",(u,c)=>{if(u)return o(u);let{destStat:f}=c;yi(f,s,a,i,d=>d?o(d):du(e,r,n,i,o))})}function Mg(e,t,r,n,i){j.readlink(t,(o,s)=>{if(o)return i(o);if(n.dereference&&(s=vt.resolve(process.cwd(),s)),e)j.readlink(r,(a,u)=>a?a.code==="EINVAL"||a.code==="UNKNOWN"?j.symlink(s,r,i):i(a):(n.dereference&&(u=vt.resolve(process.cwd(),u)),St.isSrcSubdir(s,u)?i(new Error(`Cannot copy '${s}' to a subdirectory of itself, '${u}'.`)):e.isDirectory()&&St.isSrcSubdir(u,s)?i(new Error(`Cannot overwrite '${u}' with '${s}'.`)):$g(s,r,i)));else return j.symlink(s,r,i)})}function $g(e,t,r){j.unlink(t,n=>n?r(n):j.symlink(e,t,r))}yu.exports=Ng});var pi=m((Ib,mu)=>{"use strict";var Bg=W().fromCallback;mu.exports={copy:Bg(pu())}});var _u=m((Cb,Ou)=>{"use strict";var hu=C(),wu=require("path"),_=require("assert"),wt=process.platform==="win32";function bu(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{e[r]=e[r]||hu[r],r=r+"Sync",e[r]=e[r]||hu[r]}),e.maxBusyTries=e.maxBusyTries||3}function mi(e,t,r){let n=0;typeof t=="function"&&(r=t,t={}),_(e,"rimraf: missing path"),_.strictEqual(typeof e,"string","rimraf: path should be a string"),_.strictEqual(typeof r,"function","rimraf: callback function required"),_(t,"rimraf: invalid options argument provided"),_.strictEqual(typeof t,"object","rimraf: options should be object"),bu(t),gu(e,t,function i(o){if(o){if((o.code==="EBUSY"||o.code==="ENOTEMPTY"||o.code==="EPERM")&&n<t.maxBusyTries){n++;let s=n*100;return setTimeout(()=>gu(e,t,i),s)}o.code==="ENOENT"&&(o=null)}r(o)})}function gu(e,t,r){_(e),_(t),_(typeof r=="function"),t.lstat(e,(n,i)=>{if(n&&n.code==="ENOENT")return r(null);if(n&&n.code==="EPERM"&&wt)return vu(e,t,n,r);if(i&&i.isDirectory())return br(e,t,n,r);t.unlink(e,o=>{if(o){if(o.code==="ENOENT")return r(null);if(o.code==="EPERM")return wt?vu(e,t,o,r):br(e,t,o,r);if(o.code==="EISDIR")return br(e,t,o,r)}return r(o)})})}function vu(e,t,r,n){_(e),_(t),_(typeof n=="function"),r&&_(r instanceof Error),t.chmod(e,438,i=>{i?n(i.code==="ENOENT"?null:r):t.stat(e,(o,s)=>{o?n(o.code==="ENOENT"?null:r):s.isDirectory()?br(e,t,r,n):t.unlink(e,n)})})}function Su(e,t,r){let n;_(e),_(t),r&&_(r instanceof Error);try{t.chmodSync(e,438)}catch(i){if(i.code==="ENOENT")return;throw r}try{n=t.statSync(e)}catch(i){if(i.code==="ENOENT")return;throw r}n.isDirectory()?Er(e,t,r):t.unlinkSync(e)}function br(e,t,r,n){_(e),_(t),r&&_(r instanceof Error),_(typeof n=="function"),t.rmdir(e,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?Hg(e,t,n):i&&i.code==="ENOTDIR"?n(r):n(i)})}function Hg(e,t,r){_(e),_(t),_(typeof r=="function"),t.readdir(e,(n,i)=>{if(n)return r(n);let o=i.length,s;if(o===0)return t.rmdir(e,r);i.forEach(a=>{mi(wu.join(e,a),t,u=>{if(!s){if(u)return r(s=u);--o===0&&t.rmdir(e,r)}})})})}function Eu(e,t){let r;t=t||{},bu(t),_(e,"rimraf: missing path"),_.strictEqual(typeof e,"string","rimraf: path should be a string"),_(t,"rimraf: missing options"),_.strictEqual(typeof t,"object","rimraf: options should be object");try{r=t.lstatSync(e)}catch(n){if(n.code==="ENOENT")return;n.code==="EPERM"&&wt&&Su(e,t,n)}try{r&&r.isDirectory()?Er(e,t,null):t.unlinkSync(e)}catch(n){if(n.code==="ENOENT")return;if(n.code==="EPERM")return wt?Su(e,t,n):Er(e,t,n);if(n.code!=="EISDIR")throw n;Er(e,t,n)}}function Er(e,t,r){_(e),_(t),r&&_(r instanceof Error);try{t.rmdirSync(e)}catch(n){if(n.code==="ENOTDIR")throw r;if(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")Ug(e,t);else if(n.code!=="ENOENT")throw n}}function Ug(e,t){if(_(e),_(t),t.readdirSync(e).forEach(r=>Eu(wu.join(e,r),t)),wt){let r=Date.now();do try{return t.rmdirSync(e,t)}catch{}while(Date.now()-r<500)}else return t.rmdirSync(e,t)}Ou.exports=mi;mi.sync=Eu});var bt=m((Db,Pu)=>{"use strict";var Wg=W().fromCallback,xu=_u();Pu.exports={remove:Wg(xu),removeSync:xu.sync}});var Cu=m((Fb,Iu)=>{"use strict";var Gg=W().fromCallback,Lu=C(),qu=require("path"),Tu=z(),Nu=bt(),Ru=Gg(function(t,r){r=r||function(){},Lu.readdir(t,(n,i)=>{if(n)return Tu.mkdirs(t,r);i=i.map(s=>qu.join(t,s)),o();function o(){let s=i.pop();if(!s)return r();Nu.remove(s,a=>{if(a)return r(a);o()})}})});function Au(e){let t;try{t=Lu.readdirSync(e)}catch{return Tu.mkdirsSync(e)}t.forEach(r=>{r=qu.join(e,r),Nu.removeSync(r)})}Iu.exports={emptyDirSync:Au,emptydirSync:Au,emptyDir:Ru,emptydir:Ru}});var ju=m((kb,ku)=>{"use strict";var Vg=W().fromCallback,Du=require("path"),Et=C(),Fu=z(),zg=fe().pathExists;function Jg(e,t){function r(){Et.writeFile(e,"",n=>{if(n)return t(n);t()})}Et.stat(e,(n,i)=>{if(!n&&i.isFile())return t();let o=Du.dirname(e);zg(o,(s,a)=>{if(s)return t(s);if(a)return r();Fu.mkdirs(o,u=>{if(u)return t(u);r()})})})}function Yg(e){let t;try{t=Et.statSync(e)}catch{}if(t&&t.isFile())return;let r=Du.dirname(e);Et.existsSync(r)||Fu.mkdirsSync(r),Et.writeFileSync(e,"")}ku.exports={createFile:Vg(Jg),createFileSync:Yg}});var Uu=m((jb,Hu)=>{"use strict";var Kg=W().fromCallback,$u=require("path"),Te=C(),Bu=z(),Mu=fe().pathExists;function Qg(e,t,r){function n(i,o){Te.link(i,o,s=>{if(s)return r(s);r(null)})}Mu(t,(i,o)=>{if(i)return r(i);if(o)return r(null);Te.lstat(e,s=>{if(s)return s.message=s.message.replace("lstat","ensureLink"),r(s);let a=$u.dirname(t);Mu(a,(u,c)=>{if(u)return r(u);if(c)return n(e,t);Bu.mkdirs(a,f=>{if(f)return r(f);n(e,t)})})})})}function Xg(e,t){if(Te.existsSync(t))return;try{Te.lstatSync(e)}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}let n=$u.dirname(t);return Te.existsSync(n)||Bu.mkdirsSync(n),Te.linkSync(e,t)}Hu.exports={createLink:Kg(Qg),createLinkSync:Xg}});var Gu=m((Mb,Wu)=>{"use strict";var ve=require("path"),Ot=C(),Zg=fe().pathExists;function ev(e,t,r){if(ve.isAbsolute(e))return Ot.lstat(e,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),r(n)):r(null,{toCwd:e,toDst:e}));{let n=ve.dirname(t),i=ve.join(n,e);return Zg(i,(o,s)=>o?r(o):s?r(null,{toCwd:i,toDst:e}):Ot.lstat(e,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),r(a)):r(null,{toCwd:e,toDst:ve.relative(n,e)})))}}function tv(e,t){let r;if(ve.isAbsolute(e)){if(r=Ot.existsSync(e),!r)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{let n=ve.dirname(t),i=ve.join(n,e);if(r=Ot.existsSync(i),r)return{toCwd:i,toDst:e};if(r=Ot.existsSync(e),!r)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:ve.relative(n,e)}}}Wu.exports={symlinkPaths:ev,symlinkPathsSync:tv}});var Ju=m(($b,zu)=>{"use strict";var Vu=C();function rv(e,t,r){if(r=typeof t=="function"?t:r,t=typeof t=="function"?!1:t,t)return r(null,t);Vu.lstat(e,(n,i)=>{if(n)return r(null,"file");t=i&&i.isDirectory()?"dir":"file",r(null,t)})}function nv(e,t){let r;if(t)return t;try{r=Vu.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}zu.exports={symlinkType:rv,symlinkTypeSync:nv}});var tc=m((Bb,ec)=>{"use strict";var iv=W().fromCallback,Ku=require("path"),Be=C(),Qu=z(),ov=Qu.mkdirs,sv=Qu.mkdirsSync,Xu=Gu(),av=Xu.symlinkPaths,uv=Xu.symlinkPathsSync,Zu=Ju(),cv=Zu.symlinkType,fv=Zu.symlinkTypeSync,Yu=fe().pathExists;function lv(e,t,r,n){n=typeof r=="function"?r:n,r=typeof r=="function"?!1:r,Yu(t,(i,o)=>{if(i)return n(i);if(o)return n(null);av(e,t,(s,a)=>{if(s)return n(s);e=a.toDst,cv(a.toCwd,r,(u,c)=>{if(u)return n(u);let f=Ku.dirname(t);Yu(f,(d,l)=>{if(d)return n(d);if(l)return Be.symlink(e,t,c,n);ov(f,y=>{if(y)return n(y);Be.symlink(e,t,c,n)})})})})})}function dv(e,t,r){if(Be.existsSync(t))return;let i=uv(e,t);e=i.toDst,r=fv(i.toCwd,r);let o=Ku.dirname(t);return Be.existsSync(o)||sv(o),Be.symlinkSync(e,t,r)}ec.exports={createSymlink:iv(lv),createSymlinkSync:dv}});var nc=m((Hb,rc)=>{"use strict";var Or=ju(),_r=Uu(),xr=tc();rc.exports={createFile:Or.createFile,createFileSync:Or.createFileSync,ensureFile:Or.createFile,ensureFileSync:Or.createFileSync,createLink:_r.createLink,createLinkSync:_r.createLinkSync,ensureLink:_r.createLink,ensureLinkSync:_r.createLinkSync,createSymlink:xr.createSymlink,createSymlinkSync:xr.createSymlinkSync,ensureSymlink:xr.createSymlink,ensureSymlinkSync:xr.createSymlinkSync}});var ac=m((Ub,sc)=>{var He;try{He=C()}catch{He=require("fs")}function yv(e,t,r){r==null&&(r=t,t={}),typeof t=="string"&&(t={encoding:t}),t=t||{};var n=t.fs||He,i=!0;"throws"in t&&(i=t.throws),n.readFile(e,t,function(o,s){if(o)return r(o);s=oc(s);var a;try{a=JSON.parse(s,t?t.reviver:null)}catch(u){return i?(u.message=e+": "+u.message,r(u)):r(null,null)}r(null,a)})}function pv(e,t){t=t||{},typeof t=="string"&&(t={encoding:t});var r=t.fs||He,n=!0;"throws"in t&&(n=t.throws);try{var i=r.readFileSync(e,t);return i=oc(i),JSON.parse(i,t.reviver)}catch(o){if(n)throw o.message=e+": "+o.message,o;return null}}function ic(e,t){var r,n=`
`;typeof t=="object"&&t!==null&&(t.spaces&&(r=t.spaces),t.EOL&&(n=t.EOL));var i=JSON.stringify(e,t?t.replacer:null,r);return i.replace(/\n/g,n)+n}function mv(e,t,r,n){n==null&&(n=r,r={}),r=r||{};var i=r.fs||He,o="";try{o=ic(t,r)}catch(s){n&&n(s,null);return}i.writeFile(e,o,r,n)}function hv(e,t,r){r=r||{};var n=r.fs||He,i=ic(t,r);return n.writeFileSync(e,i,r)}function oc(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e=e.replace(/^\uFEFF/,""),e}var gv={readFile:yv,readFileSync:pv,writeFile:mv,writeFileSync:hv};sc.exports=gv});var Rr=m((Wb,cc)=>{"use strict";var uc=W().fromCallback,Pr=ac();cc.exports={readJson:uc(Pr.readFile),readJsonSync:Pr.readFileSync,writeJson:uc(Pr.writeFile),writeJsonSync:Pr.writeFileSync}});var dc=m((Gb,lc)=>{"use strict";var vv=require("path"),Sv=z(),wv=fe().pathExists,fc=Rr();function bv(e,t,r,n){typeof r=="function"&&(n=r,r={});let i=vv.dirname(e);wv(i,(o,s)=>{if(o)return n(o);if(s)return fc.writeJson(e,t,r,n);Sv.mkdirs(i,a=>{if(a)return n(a);fc.writeJson(e,t,r,n)})})}lc.exports=bv});var pc=m((Vb,yc)=>{"use strict";var Ev=C(),Ov=require("path"),_v=z(),xv=Rr();function Pv(e,t,r){let n=Ov.dirname(e);Ev.existsSync(n)||_v.mkdirsSync(n),xv.writeJsonSync(e,t,r)}yc.exports=Pv});var hc=m((zb,mc)=>{"use strict";var Rv=W().fromCallback,U=Rr();U.outputJson=Rv(dc());U.outputJsonSync=pc();U.outputJSON=U.outputJson;U.outputJSONSync=U.outputJsonSync;U.writeJSON=U.writeJson;U.writeJSONSync=U.writeJsonSync;U.readJSON=U.readJson;U.readJSONSync=U.readJsonSync;mc.exports=U});var Ec=m((Jb,bc)=>{"use strict";var Sc=C(),Av=require("path"),Lv=di().copySync,wc=bt().removeSync,qv=z().mkdirpSync,gc=mt();function Tv(e,t,r){r=r||{};let n=r.overwrite||r.clobber||!1,{srcStat:i}=gc.checkPathsSync(e,t,"move");return gc.checkParentPathsSync(e,i,t,"move"),qv(Av.dirname(t)),Nv(e,t,n)}function Nv(e,t,r){if(r)return wc(t),vc(e,t,r);if(Sc.existsSync(t))throw new Error("dest already exists.");return vc(e,t,r)}function vc(e,t,r){try{Sc.renameSync(e,t)}catch(n){if(n.code!=="EXDEV")throw n;return Iv(e,t,r)}}function Iv(e,t,r){return Lv(e,t,{overwrite:r,errorOnExist:!0}),wc(e)}bc.exports=Tv});var _c=m((Yb,Oc)=>{"use strict";Oc.exports={moveSync:Ec()}});var Lc=m((Kb,Ac)=>{"use strict";var Cv=C(),Dv=require("path"),Fv=pi().copy,Rc=bt().remove,kv=z().mkdirp,jv=fe().pathExists,xc=mt();function Mv(e,t,r,n){typeof r=="function"&&(n=r,r={});let i=r.overwrite||r.clobber||!1;xc.checkPaths(e,t,"move",(o,s)=>{if(o)return n(o);let{srcStat:a}=s;xc.checkParentPaths(e,a,t,"move",u=>{if(u)return n(u);kv(Dv.dirname(t),c=>c?n(c):$v(e,t,i,n))})})}function $v(e,t,r,n){if(r)return Rc(t,i=>i?n(i):Pc(e,t,r,n));jv(t,(i,o)=>i?n(i):o?n(new Error("dest already exists.")):Pc(e,t,r,n))}function Pc(e,t,r,n){Cv.rename(e,t,i=>i?i.code!=="EXDEV"?n(i):Bv(e,t,r,n):n())}function Bv(e,t,r,n){Fv(e,t,{overwrite:r,errorOnExist:!0},o=>o?n(o):Rc(e,n))}Ac.exports=Mv});var Tc=m((Qb,qc)=>{"use strict";var Hv=W().fromCallback;qc.exports={move:Hv(Lc())}});var Dc=m((Xb,Cc)=>{"use strict";var Uv=W().fromCallback,_t=C(),Nc=require("path"),Ic=z(),Wv=fe().pathExists;function Gv(e,t,r,n){typeof r=="function"&&(n=r,r="utf8");let i=Nc.dirname(e);Wv(i,(o,s)=>{if(o)return n(o);if(s)return _t.writeFile(e,t,r,n);Ic.mkdirs(i,a=>{if(a)return n(a);_t.writeFile(e,t,r,n)})})}function Vv(e,...t){let r=Nc.dirname(e);if(_t.existsSync(r))return _t.writeFileSync(e,...t);Ic.mkdirsSync(r),_t.writeFileSync(e,...t)}Cc.exports={outputFile:Uv(Gv),outputFileSync:Vv}});var kc=m((Zb,hi)=>{"use strict";hi.exports=Object.assign({},Zn(),di(),pi(),Cu(),nc(),hc(),z(),_c(),Tc(),Dc(),fe(),bt());var Fc=require("fs");Object.getOwnPropertyDescriptor(Fc,"promises")&&Object.defineProperty(hi.exports,"promises",{get(){return Fc.promises}})});function jc(e){return(0,Ue.join)("__backends__",`${e}.js`)}var Ue,Ar,eE,tE,rE,nE,Mc=L(()=>{"use strict";Ue=require("path"),Ar=".layer0",eE=(0,Ue.join)(Ar,"lambda"),tE=(0,Ue.join)(Ar,"s3"),rE=(0,Ue.join)(Ar,"s3-permanent"),nE=(0,Ue.join)(Ar,"src")});var Bc=m((oE,$c)=>{"use strict";$c.exports=e=>{let t=/^\\\\\?\\/.test(e),r=/[^\u0000-\u0080]+/.test(e);return t||r?e:e.replace(/\\/g,"/")}});function ne(modulePath,{ignoreErrors=!1}={}){try{return eval("require")((0,Hc.default)(modulePath))}catch(e){if(ignoreErrors)return;throw e}}var Hc,We=L(()=>{"use strict";Hc=Ee(Bc())});function Uc(e){return at()?Jv().runAndReturn(e):(global.__layer0_timings__=new vi,e())}function Jv(){let e=ne("cls-hooked");return gi||(gi=e.createNamespace(zv)),gi}var zv,gi,vi,Wc=L(()=>{"use strict";ut();We();zv="layer0";vi=class{constructor(){this.values={}}get(t){return this.values[t]}set(t,r){this.values[t]=r}}});function Gc(e){return(...t)=>Uc(()=>e(...t))}var Vc=L(()=>{"use strict";re();Wc()});function Si(e){return typeof e=="string"&&(e=ne(e)),e.default&&(e=e.default),typeof e=="function"&&(e=e()),e}var zc=L(()=>{"use strict";We()});var Yc=m((hE,Jc)=>{"use strict";Jc.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;t[r]=i;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(t,r);if(s.value!==i||s.enumerable!==!0)return!1}return!0}});var Xc=m((gE,Qc)=>{"use strict";var Kc=typeof Symbol<"u"&&Symbol,Yv=Yc();Qc.exports=function(){return typeof Kc!="function"||typeof Symbol!="function"||typeof Kc("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Yv()}});var ef=m((vE,Zc)=>{"use strict";var Kv="Function.prototype.bind called on incompatible ",wi=Array.prototype.slice,Qv=Object.prototype.toString,Xv="[object Function]";Zc.exports=function(t){var r=this;if(typeof r!="function"||Qv.call(r)!==Xv)throw new TypeError(Kv+r);for(var n=wi.call(arguments,1),i,o=function(){if(this instanceof i){var f=r.apply(this,n.concat(wi.call(arguments)));return Object(f)===f?f:this}else return r.apply(t,n.concat(wi.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],u=0;u<s;u++)a.push("$"+u);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i}});var Lr=m((SE,tf)=>{"use strict";var Zv=ef();tf.exports=Function.prototype.bind||Zv});var nf=m((wE,rf)=>{"use strict";var e0=Lr();rf.exports=e0.call(Function.call,Object.prototype.hasOwnProperty)});var Ir=m((bE,uf)=>{"use strict";var b,xt=SyntaxError,af=Function,ze=TypeError,bi=function(e){try{return af('"use strict"; return ('+e+").constructor;")()}catch{}},Ne=Object.getOwnPropertyDescriptor;if(Ne)try{Ne({},"")}catch{Ne=null}var Ei=function(){throw new ze},t0=Ne?function(){try{return arguments.callee,Ei}catch{try{return Ne(arguments,"callee").get}catch{return Ei}}}():Ei,Ge=Xc()(),Se=Object.getPrototypeOf||function(e){return e.__proto__},Ve={},r0=typeof Uint8Array>"u"?b:Se(Uint8Array),Je={"%AggregateError%":typeof AggregateError>"u"?b:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?b:ArrayBuffer,"%ArrayIteratorPrototype%":Ge?Se([][Symbol.iterator]()):b,"%AsyncFromSyncIteratorPrototype%":b,"%AsyncFunction%":Ve,"%AsyncGenerator%":Ve,"%AsyncGeneratorFunction%":Ve,"%AsyncIteratorPrototype%":Ve,"%Atomics%":typeof Atomics>"u"?b:Atomics,"%BigInt%":typeof BigInt>"u"?b:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?b:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?b:Float32Array,"%Float64Array%":typeof Float64Array>"u"?b:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?b:FinalizationRegistry,"%Function%":af,"%GeneratorFunction%":Ve,"%Int8Array%":typeof Int8Array>"u"?b:Int8Array,"%Int16Array%":typeof Int16Array>"u"?b:Int16Array,"%Int32Array%":typeof Int32Array>"u"?b:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ge?Se(Se([][Symbol.iterator]())):b,"%JSON%":typeof JSON=="object"?JSON:b,"%Map%":typeof Map>"u"?b:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Ge?b:Se(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?b:Promise,"%Proxy%":typeof Proxy>"u"?b:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?b:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?b:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Ge?b:Se(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?b:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ge?Se(""[Symbol.iterator]()):b,"%Symbol%":Ge?Symbol:b,"%SyntaxError%":xt,"%ThrowTypeError%":t0,"%TypedArray%":r0,"%TypeError%":ze,"%Uint8Array%":typeof Uint8Array>"u"?b:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?b:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?b:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?b:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?b:WeakMap,"%WeakRef%":typeof WeakRef>"u"?b:WeakRef,"%WeakSet%":typeof WeakSet>"u"?b:WeakSet},n0=function e(t){var r;if(t==="%AsyncFunction%")r=bi("async function () {}");else if(t==="%GeneratorFunction%")r=bi("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=bi("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&(r=Se(i.prototype))}return Je[t]=r,r},of={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Nr=Lr(),qr=nf(),i0=Nr.call(Function.call,Array.prototype.concat),o0=Nr.call(Function.apply,Array.prototype.splice),sf=Nr.call(Function.call,String.prototype.replace),Tr=Nr.call(Function.call,String.prototype.slice),s0=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,a0=/\\(\\)?/g,u0=function(t){var r=Tr(t,0,1),n=Tr(t,-1);if(r==="%"&&n!=="%")throw new xt("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new xt("invalid intrinsic syntax, expected opening `%`");var i=[];return sf(t,s0,function(o,s,a,u){i[i.length]=a?sf(u,a0,"$1"):s||o}),i},c0=function(t,r){var n=t,i;if(qr(of,n)&&(i=of[n],n="%"+i[0]+"%"),qr(Je,n)){var o=Je[n];if(o===Ve&&(o=n0(n)),typeof o>"u"&&!r)throw new ze("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new xt("intrinsic "+t+" does not exist!")};uf.exports=function(t,r){if(typeof t!="string"||t.length===0)throw new ze("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new ze('"allowMissing" argument must be a boolean');var n=u0(t),i=n.length>0?n[0]:"",o=c0("%"+i+"%",r),s=o.name,a=o.value,u=!1,c=o.alias;c&&(i=c[0],o0(n,i0([0,1],c)));for(var f=1,d=!0;f<n.length;f+=1){var l=n[f],y=Tr(l,0,1),p=Tr(l,-1);if((y==='"'||y==="'"||y==="`"||p==='"'||p==="'"||p==="`")&&y!==p)throw new xt("property names with quotes must have matching quotes");if((l==="constructor"||!d)&&(u=!0),i+="."+l,s="%"+i+"%",qr(Je,s))a=Je[s];else if(a!=null){if(!(l in a)){if(!r)throw new ze("base intrinsic for "+t+" exists, but the property is not available.");return}if(Ne&&f+1>=n.length){var h=Ne(a,l);d=!!h,d&&"get"in h&&!("originalValue"in h.get)?a=h.get:a=a[l]}else d=qr(a,l),a=a[l];d&&!u&&(Je[s]=a)}}return a}});var pf=m((EE,Cr)=>{"use strict";var Oi=Lr(),Ye=Ir(),lf=Ye("%Function.prototype.apply%"),df=Ye("%Function.prototype.call%"),yf=Ye("%Reflect.apply%",!0)||Oi.call(df,lf),cf=Ye("%Object.getOwnPropertyDescriptor%",!0),Ie=Ye("%Object.defineProperty%",!0),f0=Ye("%Math.max%");if(Ie)try{Ie({},"a",{value:1})}catch{Ie=null}Cr.exports=function(t){var r=yf(Oi,df,arguments);if(cf&&Ie){var n=cf(r,"length");n.configurable&&Ie(r,"length",{value:1+f0(0,t.length-(arguments.length-1))})}return r};var ff=function(){return yf(Oi,lf,arguments)};Ie?Ie(Cr.exports,"apply",{value:ff}):Cr.exports.apply=ff});var vf=m((OE,gf)=>{"use strict";var mf=Ir(),hf=pf(),l0=hf(mf("String.prototype.indexOf"));gf.exports=function(t,r){var n=mf(t,!!r);return typeof n=="function"&&l0(t,".prototype.")>-1?hf(n):n}});var wf=m((_E,Sf)=>{Sf.exports=require("util").inspect});var Lf=m((xE,Af)=>{var Ci=typeof Map=="function"&&Map.prototype,_i=Object.getOwnPropertyDescriptor&&Ci?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Fr=Ci&&_i&&typeof _i.get=="function"?_i.get:null,d0=Ci&&Map.prototype.forEach,Di=typeof Set=="function"&&Set.prototype,xi=Object.getOwnPropertyDescriptor&&Di?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,kr=Di&&xi&&typeof xi.get=="function"?xi.get:null,y0=Di&&Set.prototype.forEach,p0=typeof WeakMap=="function"&&WeakMap.prototype,Rt=p0?WeakMap.prototype.has:null,m0=typeof WeakSet=="function"&&WeakSet.prototype,At=m0?WeakSet.prototype.has:null,h0=typeof WeakRef=="function"&&WeakRef.prototype,bf=h0?WeakRef.prototype.deref:null,g0=Boolean.prototype.valueOf,v0=Object.prototype.toString,S0=Function.prototype.toString,w0=String.prototype.match,qi=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Pi=Object.getOwnPropertySymbols,Ti=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Lt=typeof Symbol=="function"&&typeof Symbol.iterator=="object",b0=Object.prototype.propertyIsEnumerable,Ef=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null),Ri=wf().custom,Ai=Ri&&xf(Ri)?Ri:null,B=typeof Symbol=="function"&&typeof Symbol.toStringTag<"u"?Symbol.toStringTag:null;Af.exports=function e(t,r,n,i){var o=r||{};if(Ce(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Ce(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=Ce(o,"customInspect")?o.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Ce(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return Rf(t,o);if(typeof t=="number")return t===0?1/0/t>0?"0":"-0":String(t);if(typeof t=="bigint")return String(t)+"n";var a=typeof o.depth>"u"?5:o.depth;if(typeof n>"u"&&(n=0),n>=a&&a>0&&typeof t=="object")return Ni(t)?"[Array]":"[Object]";var u=$0(o,n);if(typeof i>"u")i=[];else if(Pf(i,t)>=0)return"[Circular]";function c(O,T,D){if(T&&(i=i.slice(),i.push(T)),D){var N={depth:o.depth};return Ce(o,"quoteStyle")&&(N.quoteStyle=o.quoteStyle),e(O,N,n+1,i)}return e(O,o,n+1,i)}if(typeof t=="function"){var f=T0(t),d=Dr(t,c);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(d.length>0?" { "+d.join(", ")+" }":"")}if(xf(t)){var l=Lt?String(t).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):Ti.call(t);return typeof t=="object"&&!Lt?Pt(l):l}if(k0(t)){for(var y="<"+String(t.nodeName).toLowerCase(),p=t.attributes||[],h=0;h<p.length;h++)y+=" "+p[h].name+"="+_f(E0(p[h].value),"double",o);return y+=">",t.childNodes&&t.childNodes.length&&(y+="..."),y+="</"+String(t.nodeName).toLowerCase()+">",y}if(Ni(t)){if(t.length===0)return"[]";var g=Dr(t,c);return u&&!M0(g)?"["+Ii(g,u)+"]":"[ "+g.join(", ")+" ]"}if(x0(t)){var S=Dr(t,c);return S.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+S.join(", ")+" }"}if(typeof t=="object"&&s){if(Ai&&typeof t[Ai]=="function")return t[Ai]();if(s!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(N0(t)){var A=[];return d0.call(t,function(O,T){A.push(c(T,t,!0)+" => "+c(O,t))}),Of("Map",Fr.call(t),A,u)}if(D0(t)){var q=[];return y0.call(t,function(O){q.push(c(O,t))}),Of("Set",kr.call(t),q,u)}if(I0(t))return Li("WeakMap");if(F0(t))return Li("WeakSet");if(C0(t))return Li("WeakRef");if(R0(t))return Pt(c(Number(t)));if(L0(t))return Pt(c(qi.call(t)));if(A0(t))return Pt(g0.call(t));if(P0(t))return Pt(c(String(t)));if(!O0(t)&&!_0(t)){var M=Dr(t,c),x=Ef?Ef(t)===Object.prototype:t instanceof Object||t.constructor===Object,I=t instanceof Object?"":"null prototype",v=!x&&B&&Object(t)===t&&B in t?we(t).slice(8,-1):I?"Object":"",E=x||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",w=E+(v||I?"["+[].concat(v||[],I||[]).join(": ")+"] ":"");return M.length===0?w+"{}":u?w+"{"+Ii(M,u)+"}":w+"{ "+M.join(", ")+" }"}return String(t)};function _f(e,t,r){var n=(r.quoteStyle||t)==="double"?'"':"'";return n+e+n}function E0(e){return String(e).replace(/"/g,"&quot;")}function Ni(e){return we(e)==="[object Array]"&&(!B||!(typeof e=="object"&&B in e))}function O0(e){return we(e)==="[object Date]"&&(!B||!(typeof e=="object"&&B in e))}function _0(e){return we(e)==="[object RegExp]"&&(!B||!(typeof e=="object"&&B in e))}function x0(e){return we(e)==="[object Error]"&&(!B||!(typeof e=="object"&&B in e))}function P0(e){return we(e)==="[object String]"&&(!B||!(typeof e=="object"&&B in e))}function R0(e){return we(e)==="[object Number]"&&(!B||!(typeof e=="object"&&B in e))}function A0(e){return we(e)==="[object Boolean]"&&(!B||!(typeof e=="object"&&B in e))}function xf(e){if(Lt)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!Ti)return!1;try{return Ti.call(e),!0}catch{}return!1}function L0(e){if(!e||typeof e!="object"||!qi)return!1;try{return qi.call(e),!0}catch{}return!1}var q0=Object.prototype.hasOwnProperty||function(e){return e in this};function Ce(e,t){return q0.call(e,t)}function we(e){return v0.call(e)}function T0(e){if(e.name)return e.name;var t=w0.call(S0.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function Pf(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function N0(e){if(!Fr||!e||typeof e!="object")return!1;try{Fr.call(e);try{kr.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function I0(e){if(!Rt||!e||typeof e!="object")return!1;try{Rt.call(e,Rt);try{At.call(e,At)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function C0(e){if(!bf||!e||typeof e!="object")return!1;try{return bf.call(e),!0}catch{}return!1}function D0(e){if(!kr||!e||typeof e!="object")return!1;try{kr.call(e);try{Fr.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function F0(e){if(!At||!e||typeof e!="object")return!1;try{At.call(e,At);try{Rt.call(e,Rt)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function k0(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function Rf(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return Rf(e.slice(0,t.maxStringLength),t)+n}var i=e.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,j0);return _f(i,"single",t)}function j0(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+t.toString(16).toUpperCase()}function Pt(e){return"Object("+e+")"}function Li(e){return e+" { ? }"}function Of(e,t,r,n){var i=n?Ii(r,n):r.join(", ");return e+" ("+t+") {"+i+"}"}function M0(e){for(var t=0;t<e.length;t++)if(Pf(e[t],`
`)>=0)return!1;return!0}function $0(e,t){var r;if(e.indent==="	")r="	";else if(typeof e.indent=="number"&&e.indent>0)r=Array(e.indent+1).join(" ");else return null;return{base:r,prev:Array(t+1).join(r)}}function Ii(e,t){if(e.length===0)return"";var r=`
`+t.prev+t.base;return r+e.join(","+r)+`
`+t.prev}function Dr(e,t){var r=Ni(e),n=[];if(r){n.length=e.length;for(var i=0;i<e.length;i++)n[i]=Ce(e,i)?t(e[i],e):""}var o=typeof Pi=="function"?Pi(e):[],s;if(Lt){s={};for(var a=0;a<o.length;a++)s["$"+o[a]]=o[a]}for(var u in e)!Ce(e,u)||r&&String(Number(u))===u&&u<e.length||Lt&&s["$"+u]instanceof Symbol||(/[^\w$]/.test(u)?n.push(t(u,e)+": "+t(e[u],e)):n.push(u+": "+t(e[u],e)));if(typeof Pi=="function")for(var c=0;c<o.length;c++)b0.call(e,o[c])&&n.push("["+t(o[c])+"]: "+t(e[o[c]],e));return n}});var Tf=m((PE,qf)=>{"use strict";var Fi=Ir(),Ke=vf(),B0=Lf(),H0=Fi("%TypeError%"),jr=Fi("%WeakMap%",!0),Mr=Fi("%Map%",!0),U0=Ke("WeakMap.prototype.get",!0),W0=Ke("WeakMap.prototype.set",!0),G0=Ke("WeakMap.prototype.has",!0),V0=Ke("Map.prototype.get",!0),z0=Ke("Map.prototype.set",!0),J0=Ke("Map.prototype.has",!0),ki=function(e,t){for(var r=e,n;(n=r.next)!==null;r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n,n},Y0=function(e,t){var r=ki(e,t);return r&&r.value},K0=function(e,t,r){var n=ki(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}},Q0=function(e,t){return!!ki(e,t)};qf.exports=function(){var t,r,n,i={assert:function(o){if(!i.has(o))throw new H0("Side channel does not contain "+B0(o))},get:function(o){if(jr&&o&&(typeof o=="object"||typeof o=="function")){if(t)return U0(t,o)}else if(Mr){if(r)return V0(r,o)}else if(n)return Y0(n,o)},has:function(o){if(jr&&o&&(typeof o=="object"||typeof o=="function")){if(t)return G0(t,o)}else if(Mr){if(r)return J0(r,o)}else if(n)return Q0(n,o);return!1},set:function(o,s){jr&&o&&(typeof o=="object"||typeof o=="function")?(t||(t=new jr),W0(t,o,s)):Mr?(r||(r=new Mr),z0(r,o,s)):(n||(n={key:{},next:null}),K0(n,o,s))}};return i}});var $r=m((RE,Nf)=>{"use strict";var X0=String.prototype.replace,Z0=/%20/g,ji={RFC1738:"RFC1738",RFC3986:"RFC3986"};Nf.exports={default:ji.RFC3986,formatters:{RFC1738:function(e){return X0.call(e,Z0,"+")},RFC3986:function(e){return String(e)}},RFC1738:ji.RFC1738,RFC3986:ji.RFC3986}});var $i=m((AE,Cf)=>{"use strict";var eS=$r(),Mi=Object.prototype.hasOwnProperty,De=Array.isArray,le=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),tS=function(t){for(;t.length>1;){var r=t.pop(),n=r.obj[r.prop];if(De(n)){for(var i=[],o=0;o<n.length;++o)typeof n[o]<"u"&&i.push(n[o]);r.obj[r.prop]=i}}},If=function(t,r){for(var n=r&&r.plainObjects?Object.create(null):{},i=0;i<t.length;++i)typeof t[i]<"u"&&(n[i]=t[i]);return n},rS=function e(t,r,n){if(!r)return t;if(typeof r!="object"){if(De(t))t.push(r);else if(t&&typeof t=="object")(n&&(n.plainObjects||n.allowPrototypes)||!Mi.call(Object.prototype,r))&&(t[r]=!0);else return[t,r];return t}if(!t||typeof t!="object")return[t].concat(r);var i=t;return De(t)&&!De(r)&&(i=If(t,n)),De(t)&&De(r)?(r.forEach(function(o,s){if(Mi.call(t,s)){var a=t[s];a&&typeof a=="object"&&o&&typeof o=="object"?t[s]=e(a,o,n):t.push(o)}else t[s]=o}),t):Object.keys(r).reduce(function(o,s){var a=r[s];return Mi.call(o,s)?o[s]=e(o[s],a,n):o[s]=a,o},i)},nS=function(t,r){return Object.keys(r).reduce(function(n,i){return n[i]=r[i],n},t)},iS=function(e,t,r){var n=e.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},oS=function(t,r,n,i,o){if(t.length===0)return t;var s=t;if(typeof t=="symbol"?s=Symbol.prototype.toString.call(t):typeof t!="string"&&(s=String(t)),n==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var a="",u=0;u<s.length;++u){var c=s.charCodeAt(u);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||o===eS.RFC1738&&(c===40||c===41)){a+=s.charAt(u);continue}if(c<128){a=a+le[c];continue}if(c<2048){a=a+(le[192|c>>6]+le[128|c&63]);continue}if(c<55296||c>=57344){a=a+(le[224|c>>12]+le[128|c>>6&63]+le[128|c&63]);continue}u+=1,c=65536+((c&1023)<<10|s.charCodeAt(u)&1023),a+=le[240|c>>18]+le[128|c>>12&63]+le[128|c>>6&63]+le[128|c&63]}return a},sS=function(t){for(var r=[{obj:{o:t},prop:"o"}],n=[],i=0;i<r.length;++i)for(var o=r[i],s=o.obj[o.prop],a=Object.keys(s),u=0;u<a.length;++u){var c=a[u],f=s[c];typeof f=="object"&&f!==null&&n.indexOf(f)===-1&&(r.push({obj:s,prop:c}),n.push(f))}return tS(r),t},aS=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},uS=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},cS=function(t,r){return[].concat(t,r)},fS=function(t,r){if(De(t)){for(var n=[],i=0;i<t.length;i+=1)n.push(r(t[i]));return n}return r(t)};Cf.exports={arrayToObject:If,assign:nS,combine:cS,compact:sS,decode:iS,encode:oS,isBuffer:uS,isRegExp:aS,maybeMap:fS,merge:rS}});var $f=m((LE,Mf)=>{"use strict";var kf=Tf(),Bi=$i(),qt=$r(),lS=Object.prototype.hasOwnProperty,Df={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,r){return t+"["+r+"]"},repeat:function(t){return t}},Fe=Array.isArray,dS=Array.prototype.push,jf=function(e,t){dS.apply(e,Fe(t)?t:[t])},yS=Date.prototype.toISOString,Ff=qt.default,H={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Bi.encode,encodeValuesOnly:!1,format:Ff,formatter:qt.formatters[Ff],indices:!1,serializeDate:function(t){return yS.call(t)},skipNulls:!1,strictNullHandling:!1},pS=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},mS=function e(t,r,n,i,o,s,a,u,c,f,d,l,y,p,h){var g=t;if(h.has(t))throw new RangeError("Cyclic object value");if(typeof a=="function"?g=a(r,g):g instanceof Date?g=f(g):n==="comma"&&Fe(g)&&(g=Bi.maybeMap(g,function(O){return O instanceof Date?f(O):O})),g===null){if(i)return s&&!y?s(r,H.encoder,p,"key",d):r;g=""}if(pS(g)||Bi.isBuffer(g)){if(s){var S=y?r:s(r,H.encoder,p,"key",d);return[l(S)+"="+l(s(g,H.encoder,p,"value",d))]}return[l(r)+"="+l(String(g))]}var A=[];if(typeof g>"u")return A;var q;if(n==="comma"&&Fe(g))q=[{value:g.length>0?g.join(",")||null:void 0}];else if(Fe(a))q=a;else{var M=Object.keys(g);q=u?M.sort(u):M}for(var x=0;x<q.length;++x){var I=q[x],v=typeof I=="object"&&I.value!==void 0?I.value:g[I];if(!(o&&v===null)){var E=Fe(g)?typeof n=="function"?n(r,I):r:r+(c?"."+I:"["+I+"]");h.set(t,!0);var w=kf();jf(A,e(v,E,n,i,o,s,a,u,c,f,d,l,y,p,w))}}return A},hS=function(t){if(!t)return H;if(t.encoder!==null&&t.encoder!==void 0&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=t.charset||H.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=qt.default;if(typeof t.format<"u"){if(!lS.call(qt.formatters,t.format))throw new TypeError("Unknown format option provided.");n=t.format}var i=qt.formatters[n],o=H.filter;return(typeof t.filter=="function"||Fe(t.filter))&&(o=t.filter),{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:H.addQueryPrefix,allowDots:typeof t.allowDots>"u"?H.allowDots:!!t.allowDots,charset:r,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:H.charsetSentinel,delimiter:typeof t.delimiter>"u"?H.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:H.encode,encoder:typeof t.encoder=="function"?t.encoder:H.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:H.encodeValuesOnly,filter:o,format:n,formatter:i,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:H.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:H.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:H.strictNullHandling}};Mf.exports=function(e,t){var r=e,n=hS(t),i,o;typeof n.filter=="function"?(o=n.filter,r=o("",r)):Fe(n.filter)&&(o=n.filter,i=o);var s=[];if(typeof r!="object"||r===null)return"";var a;t&&t.arrayFormat in Df?a=t.arrayFormat:t&&"indices"in t?a=t.indices?"indices":"repeat":a="indices";var u=Df[a];i||(i=Object.keys(r)),n.sort&&i.sort(n.sort);for(var c=kf(),f=0;f<i.length;++f){var d=i[f];n.skipNulls&&r[d]===null||jf(s,mS(r[d],d,u,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,c))}var l=s.join(n.delimiter),y=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?y+="utf8=%26%2310003%3B&":y+="utf8=%E2%9C%93&"),l.length>0?y+l:""}});var Uf=m((qE,Hf)=>{"use strict";var Qe=$i(),Hi=Object.prototype.hasOwnProperty,gS=Array.isArray,F={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Qe.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},vS=function(e){return e.replace(/&#(\d+);/g,function(t,r){return String.fromCharCode(parseInt(r,10))})},Bf=function(e,t){return e&&typeof e=="string"&&t.comma&&e.indexOf(",")>-1?e.split(","):e},SS="utf8=%26%2310003%3B",wS="utf8=%E2%9C%93",bS=function(t,r){var n={},i=r.ignoreQueryPrefix?t.replace(/^\?/,""):t,o=r.parameterLimit===1/0?void 0:r.parameterLimit,s=i.split(r.delimiter,o),a=-1,u,c=r.charset;if(r.charsetSentinel)for(u=0;u<s.length;++u)s[u].indexOf("utf8=")===0&&(s[u]===wS?c="utf-8":s[u]===SS&&(c="iso-8859-1"),a=u,u=s.length);for(u=0;u<s.length;++u)if(u!==a){var f=s[u],d=f.indexOf("]="),l=d===-1?f.indexOf("="):d+1,y,p;l===-1?(y=r.decoder(f,F.decoder,c,"key"),p=r.strictNullHandling?null:""):(y=r.decoder(f.slice(0,l),F.decoder,c,"key"),p=Qe.maybeMap(Bf(f.slice(l+1),r),function(h){return r.decoder(h,F.decoder,c,"value")})),p&&r.interpretNumericEntities&&c==="iso-8859-1"&&(p=vS(p)),f.indexOf("[]=")>-1&&(p=gS(p)?[p]:p),Hi.call(n,y)?n[y]=Qe.combine(n[y],p):n[y]=p}return n},ES=function(e,t,r,n){for(var i=n?t:Bf(t,r),o=e.length-1;o>=0;--o){var s,a=e[o];if(a==="[]"&&r.parseArrays)s=[].concat(i);else{s=r.plainObjects?Object.create(null):{};var u=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,c=parseInt(u,10);!r.parseArrays&&u===""?s={0:i}:!isNaN(c)&&a!==u&&String(c)===u&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(s=[],s[c]=i):s[u]=i}i=s}return i},OS=function(t,r,n,i){if(!!t){var o=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,s=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,u=n.depth>0&&s.exec(o),c=u?o.slice(0,u.index):o,f=[];if(c){if(!n.plainObjects&&Hi.call(Object.prototype,c)&&!n.allowPrototypes)return;f.push(c)}for(var d=0;n.depth>0&&(u=a.exec(o))!==null&&d<n.depth;){if(d+=1,!n.plainObjects&&Hi.call(Object.prototype,u[1].slice(1,-1))&&!n.allowPrototypes)return;f.push(u[1])}return u&&f.push("["+o.slice(u.index)+"]"),ES(f,r,n,i)}},_S=function(t){if(!t)return F;if(t.decoder!==null&&t.decoder!==void 0&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof t.charset>"u"?F.charset:t.charset;return{allowDots:typeof t.allowDots>"u"?F.allowDots:!!t.allowDots,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:F.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:F.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:F.arrayLimit,charset:r,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:F.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:F.comma,decoder:typeof t.decoder=="function"?t.decoder:F.decoder,delimiter:typeof t.delimiter=="string"||Qe.isRegExp(t.delimiter)?t.delimiter:F.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:F.depth,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:F.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:F.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:F.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:F.strictNullHandling}};Hf.exports=function(e,t){var r=_S(t);if(e===""||e===null||typeof e>"u")return r.plainObjects?Object.create(null):{};for(var n=typeof e=="string"?bS(e,r):e,i=r.plainObjects?Object.create(null):{},o=Object.keys(n),s=0;s<o.length;++s){var a=o[s],u=OS(a,n[a],r,typeof e=="string");i=Qe.merge(i,u,r)}return r.allowSparse===!0?i:Qe.compact(i)}});var Gf=m((TE,Wf)=>{"use strict";var xS=$f(),PS=Uf(),RS=$r();Wf.exports={formats:RS,parse:PS,stringify:xS}});var Yf=m(Ui=>{"use strict";var Vf=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,AS=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,zf=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,LS=/\\([\u000b\u0020-\u00ff])/g,qS=/([\\"])/g,Jf=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;Ui.format=TS;Ui.parse=NS;function TS(e){if(!e||typeof e!="object")throw new TypeError("argument obj is required");var t=e.parameters,r=e.type;if(!r||!Jf.test(r))throw new TypeError("invalid type");var n=r;if(t&&typeof t=="object")for(var i,o=Object.keys(t).sort(),s=0;s<o.length;s++){if(i=o[s],!zf.test(i))throw new TypeError("invalid parameter name");n+="; "+i+"="+CS(t[i])}return n}function NS(e){if(!e)throw new TypeError("argument string is required");var t=typeof e=="object"?IS(e):e;if(typeof t!="string")throw new TypeError("argument string is required to be a string");var r=t.indexOf(";"),n=r!==-1?t.substr(0,r).trim():t.trim();if(!Jf.test(n))throw new TypeError("invalid media type");var i=new DS(n.toLowerCase());if(r!==-1){var o,s,a;for(Vf.lastIndex=r;s=Vf.exec(t);){if(s.index!==r)throw new TypeError("invalid parameter format");r+=s[0].length,o=s[1].toLowerCase(),a=s[2],a[0]==='"'&&(a=a.substr(1,a.length-2).replace(LS,"$1")),i.parameters[o]=a}if(r!==t.length)throw new TypeError("invalid parameter format")}return i}function IS(e){var t;if(typeof e.getHeader=="function"?t=e.getHeader("content-type"):typeof e.headers=="object"&&(t=e.headers&&e.headers["content-type"]),typeof t!="string")throw new TypeError("content-type header is missing from object");return t}function CS(e){var t=String(e);if(zf.test(t))return t;if(t.length>0&&!AS.test(t))throw new TypeError("invalid parameter value");return'"'+t.replace(qS,"\\$1")+'"'}function DS(e){this.parameters=Object.create(null),this.type=e}});function Br(e){return e?typeof e.length=="number"?!e.length:!(typeof e=="object"&&Object.keys(e).length):!0}var Kf=L(()=>{"use strict"});function Wi(e){return typeof e=="string"}var Qf=L(()=>{"use strict"});function Ur(e){var r;let t=(r=e.getHeader(P.contentEncoding))==null?void 0:r.toLowerCase();if(!t)return!0;switch(t){case me:return Buffer.isBuffer(e.body)?(e.body=(0,Hr.gunzipSync)(e.body),e.removeHeader(P.contentEncoding),e.setHeader(P.contentLength,Buffer.byteLength(e.body)),!0):!1;case pe:return Buffer.isBuffer(e.body)?(e.body=(0,Hr.brotliDecompressSync)(e.body),e.removeHeader(P.contentEncoding),e.setHeader(P.contentLength,Buffer.byteLength(e.body)),!0):!1;default:return!1}}var Hr,Xf=L(()=>{"use strict";Hr=require("zlib");re()});var Wr,Zf,FS,kS,el,tl=L(()=>{"use strict";Wr=require("zlib");re();Zf=Ee(Yf());Kf();Qf();Xf();FS=new Set(["application/atom_xml","application/javascript","application/json","application/rss+xml","application/vnd.ms-fontobject","application/x-font-opentype","application/x-font-ttf","application/x-javascript","application/xhtml+xml","application/xml","application/xml+rss","font/eot","font/opentype","font/otf","image/svg+xml","image/x-icon","text/css","text/html","text/javascript","text/js","text/plain"]),kS=(e,t,r)=>{let n=t.getHeader(P.contentEncoding);if(Br(e)){Br(n)||(Ur(t),r.body=t.body);return}let i=/\bbr\b/,s=/\bgzip\b/.test(e),a=i.test(e);if(s&&n===me||a&&n===pe||!Ur(t))return;let u=t.getHeader(P.contentType);if(u=Wi(u)?[u]:u,!u||!FS.has((0,Zf.parse)(u[0]).type.toLowerCase()))return;let c;s?c=me:a&&(c=pe);let f;switch(c){case pe:{f=(0,Wr.brotliCompressSync)(Buffer.from(r.body));break}case me:{f=(0,Wr.gzipSync)(Buffer.from(r.body));break}default:return}t.setHeader(P.contentLength,Buffer.byteLength(f)),t.setHeader(P.contentEncoding,c),r.body=f},el=kS});var rl=m((HE,jS)=>{jS.exports={name:"@layer0/core",version:"4.19.9",main:"./index.js",license:"UNLICENSED",scripts:{docs:"typedoc",build:"rm -rf ./dist; mkdir ./dist; cp -r package.json README.md serverless.yml default-app ./dist; tsc; npm run bundle-handler;","bundle-handler":"esbuild src/lambda/handler.ts --bundle --minify --platform=node --target=node14.0 --outfile=dist/lambda/handler.js --log-level=error --sourcemap",watch:"npm-watch","ts:watch":"tsc --watch","push-build":"npm run build && cd dist && yalc push --force && cd ..",release:"cd ./dist; npm publish --access public","release:next":"npm run release -- --tag next",test:"jest --watchAll=false --runInBand --forceExit"},dependencies:{"@babel/parser":"^7.18.9","@babel/traverse":"^7.18.9","@types/lodash.clonedeep":"^4.5.6",ajv:"^6.12.6","babel-loader":"^8.2.2",chalk:"^4.1.2",chardet:"^1.4.0",chokidar:"^3.5.1","cls-hooked":"^4.2.2","content-type":"^1.0.4",cookie:"^0.4.1","cross-spawn":"^7.0.3","decode-uri-component":"^0.2.0",deepmerge:"^4.2.2",esbuild:"^0.14.49",express:"^4.17.1","fs-extra":"^8.1.0",globby:"^11.0.2","http-proxy":"^1.18.1","lodash.clonedeep":"^4.5.0","lru-cache":"^6.0.0","mime-types":"^2.1.35","node-fetch":"^2.6.1","path-to-regexp":"^6.2.0",pino:"^6.13.3",qs:"^6.10.1","resolve-package-path":"^4.0.3",semver:"^7.3.5",shelljs:"^0.8.5",slash:"^3.0.0","tcp-port-used":"^1.0.2","ts-loader":"^8.2.0",unixify:"^1.0.0",uuid:"^8.3.2"},publishConfig:{directory:"dist"},watch:{"push-build":{patterns:["src","bin","serverless.yml","default-app","package.json"],extensions:["js","ts"],quiet:!1}},jest:{clearMocks:!0,collectCoverage:!0,transform:{"^.+\\.(js)?$":"babel-jest","^.+\\.ts$":"ts-jest"},moduleFileExtensions:["ts","js","json"],setupFilesAfterEnv:["<rootDir>/test/jest.js"],transformIgnorePatterns:["<rootDir>/node_modules/"],moduleNameMapper:{"../package.json":"<rootDir>/package.json","^@layer0/core(.*)$":"<rootDir>/src/$1"},collectCoverageFrom:["./src/**/*.{ts,js}","!**/mocks/**","!**/test-utils/**","!**/index.ts","!**/src/types.ts","!**/plugins/PluginBase.ts","!**/bin/**/*"]},devDependencies:{"@types/cls-hooked":"^4.3.1","@types/content-type":"^1.1.3","@types/cookie":"^0.3.3","@types/cross-spawn":"^6.0.2","@types/decode-uri-component":"^0.2.0","@types/express":"^4.17.7","@types/fs-extra":"^8.1.1","@types/http-proxy":"^1.17.4","@types/jest":"^26.0.23","@types/lodash":"^4.14.162","@types/lru-cache":"^5.1.0","@types/mime-types":"^2.1.0","@types/node":"^14.6.4","@types/route-parser":"^0.1.3","@types/semver":"^7.3.9","@types/shelljs":"^0.8.8","@types/tcp-port-used":"^1.0.0","@types/unixify":"^1.0.0","@types/uuid":"^8.0.1","@types/webpack-bundle-analyzer":"^3.9.0",lodash:"^4.17.21",nock:"^13.2.8",stripe:"^9.12.0",webpack:"^5.27.0","webpack-bundle-analyzer":"^3.9.0","webpack-dev-middleware":"^4.1.0"}}});function MS(){return process.env[ye.versionOverride]||rl().version}function $S(e){Vi(e,P.x0Status,`w=${e.statusCode}`)}function BS(e,t){let r=t.lambda;Vi(e,P.x0T,`wt=${t.duration},wc=${r.invocationCounter},wg=${r.age},wl=${r.lifetimeDuration}`)}function HS(e,t,r){Vi(e,P.x0Components,`w=${t},wi=${r}`)}function Vi(e,t,r){let n=e.multiValueHeaders[t];n?Array.isArray(n)?n[0]=`${r},${n[0]}`:e.multiValueHeaders[t]=`${r},${n}`:e.multiValueHeaders[t]=`${r}`}var Gr,Gi,nl,il=L(()=>{"use strict";re();Gr=Ee(Gf());tn();tl();Gi=Ee(require("stream"));ut();nl=(e,t,r={allowReqQueryDuplicates:!1})=>{let n={body:Buffer.from(""),isBase64Encoded:!0,statusCode:200,statusMessage:"OK",multiValueHeaders:{}},i,o=new Gi.default.Readable;if(o.url=e.path,o.path=e.path,o.query={},o.method=e.httpMethod,o.rawHeaders=[],o.headers={},e.multiValueQueryStringParameters&&Object.keys(e.multiValueQueryStringParameters).length){Object.keys(e.multiValueQueryStringParameters).forEach(y=>{let p=e.multiValueQueryStringParameters[y];Array.isArray(p)&&p.length===1&&(e.multiValueQueryStringParameters[y]=p[0])});let l=(0,Gr.stringify)(e.multiValueQueryStringParameters,{indices:!r.allowReqQueryDuplicates});o.url+=`?${l}`,o.query=(0,Gr.parse)(l)}let s=e.multiValueHeaders||{};for(let l of Object.keys(s)){for(let y of s[l])o.rawHeaders.push(l),o.rawHeaders.push(y);o.headers[l.toLowerCase()]=s[l].toString()}o.getHeader=l=>o.headers[l.toLowerCase()],o.getHeaders=()=>o.headers,o.setHeader=(l,y)=>{o.headers[l.toLowerCase()]=y},o.removeHeader=l=>{delete o.headers[l.toLowerCase()]},o.connection={};let a=o.getHeader(P.acceptEncoding);o.secure=!at()&&o.getHeader(P.x0Protocol)!=="http",o.socket={encrypted:o.secure},o.connection={encrypted:o.secure},o.protocol=o.secure?"https":"http";let u;o.headers[P.xRequestId]||(u=Jt(),o.headers[P.xRequestId]=u);let c=new Gi.default;Object.defineProperty(c,"statusCode",{get(){return n.statusCode},set(l){n.statusCode=l}}),Object.defineProperty(c,"statusMessage",{get(){return n.statusMessage},set(l){n.statusMessage=l}}),c.headers={},c.writeHead=(l,y,p)=>{n.statusCode=l,typeof y=="string"?n.statusMessage=y:typeof y=="object"&&(p=y,y=void 0),typeof p=="object"&&Object.entries(p).forEach(([h,g])=>{c.setHeader(h,g)}),u&&c.setHeader(P.xRequestId,u)},c.write=l=>{n.body=Buffer.concat([n.body,Buffer.isBuffer(l)?l:Buffer.from(l)])},c.setHeader=(l,y)=>{c.headers[l.toLowerCase()]=y},c.removeHeader=l=>{delete c.headers[l.toLowerCase()]},c.getHeader=l=>c.headers[l.toLowerCase()],c.getHeaders=()=>c.headers;let f=l=>y=>{y&&c.write(y),el(a,c,n),n.body=n.body.toString("base64"),n.multiValueHeaders=c.headers,t.stop(),$S(n),BS(n,t),HS(n,MS(),t.lambda.id),d(),l(n)};i=new Promise(l=>{c.end=f(l)}),e.body&&(o.push(e.body,e.isBase64Encoded?"base64":void 0),o._rawBodyBase64=e.body),o.push(null);function d(){for(let l of Object.keys(n.multiValueHeaders))Array.isArray(n.multiValueHeaders[l])||(n.multiValueHeaders[l]=[n.multiValueHeaders[l]])}return{req:o,res:c,responsePromise:i}}});function Tt(e,t){let r=e,n=t.split(".");for(let i of n){if(typeof r>"u")return;r=r[i]}return r}var zi=L(()=>{"use strict"});function Ji(e,t){return!!Tt(e,t)}var ol=L(()=>{"use strict";zi()});var cl=m((QE,ul)=>{"use strict";var US=function(t){return WS(t)&&!GS(t)};function WS(e){return!!e&&typeof e=="object"}function GS(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||JS(e)}var VS=typeof Symbol=="function"&&Symbol.for,zS=VS?Symbol.for("react.element"):60103;function JS(e){return e.$$typeof===zS}function YS(e){return Array.isArray(e)?[]:{}}function Nt(e,t){return t.clone!==!1&&t.isMergeableObject(e)?Xe(YS(e),e,t):e}function KS(e,t,r){return e.concat(t).map(function(n){return Nt(n,r)})}function QS(e,t){if(!t.customMerge)return Xe;var r=t.customMerge(e);return typeof r=="function"?r:Xe}function XS(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return e.propertyIsEnumerable(t)}):[]}function sl(e){return Object.keys(e).concat(XS(e))}function al(e,t){try{return t in e}catch{return!1}}function ZS(e,t){return al(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function ew(e,t,r){var n={};return r.isMergeableObject(e)&&sl(e).forEach(function(i){n[i]=Nt(e[i],r)}),sl(t).forEach(function(i){ZS(e,i)||(al(e,i)&&r.isMergeableObject(t[i])?n[i]=QS(i,r)(e[i],t[i],r):n[i]=Nt(t[i],r))}),n}function Xe(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||KS,r.isMergeableObject=r.isMergeableObject||US,r.cloneUnlessOtherwiseSpecified=Nt;var n=Array.isArray(t),i=Array.isArray(e),o=n===i;return o?n?r.arrayMerge(e,t,r):ew(e,t,r):Nt(t,r)}Xe.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(n,i){return Xe(n,i,r)},{})};var tw=Xe;ul.exports=tw});var Ki,Xi,fl,ll,Yi,Qi,dl,yl=L(()=>{"use strict";Ki=require("os");re();ut();We();Xi={$id:"/domainOrIpSchema",type:"string"},fl={$id:"/backendObjectSchema",type:"object",properties:{domainOrIp:{$ref:Xi.$id},port:{type:"number",minimum:1,maximum:65535},hostHeader:{type:"string"},disableCheckCert:{type:"boolean"},firstByteTimeout:{type:"number"},basePath:{type:"string"}},additionalProperties:!1,required:["domainOrIp"]},ll={$id:"/backendSchema",type:"object",patternProperties:{"^.*$":{oneOf:[{$ref:Xi.$id},{$ref:fl.$id}]}}},Yi={$id:"/layer0FileConfigurationSchema",type:"object",properties:{name:{type:"string"},team:{type:"string"},prerenderConcurrency:{type:"number"},production:{type:"boolean"},routes:{type:"string"},server:{type:"object",required:["path"],properties:{path:{type:"string"},export:{type:"string"}}},includeFiles:{type:"object"},sources:{type:"array",items:{type:"string"}},backends:{$ref:ll.$id},includeNodeModules:{type:"boolean"},connector:{type:"string"}},additionalProperties:!1,required:[]},Qi=class{static validateLayer0FileConfiguration(t){if(fr())return t;let r=ne("ajv");if(t.connector)try{let s=require(`${t.connector}/configSchema`);Object.assign(Yi.properties,s)}catch{}let n=new r({allErrors:!0,schemas:[Yi,ll,fl,Xi]}),i=[],o=n.getSchema(Yi.$id);if(t.backends&&t.backends.moov!=null&&i.push({message:"is a reserved backend name",dataPath:".backends['moov']"}),t.backends&&t.backends[ue.static]&&i.push({message:"is a reserved backend name",dataPath:`.backends.${ue.static}`}),t.backends&&t.backends[ue.js]&&i.push({message:"is a reserved backend name",dataPath:`.backends.${ue.js}`}),!o(t)&&o.errors&&(i=[...i,...o.errors]),i.length){let s=i.map((a,u)=>{let c=`${u+1}) config${a.dataPath}: ${a.message}`;return a.keyword==="additionalProperties"&&(c+=` '${a.params.additionalProperty}'`),c}).join(Ki.EOL);throw new Error(`Layer0 configuration validation failed with errors: ${Ki.EOL}${s}`)}return t}},dl=Qi});var pl,Zi,Vr,eo,ml,hl=L(()=>{"use strict";zi();ol();pl=Ee(cl()),Zi=require("fs"),Vr=require("path");re();yl();We();eo=class{constructor(){this.defaults={production:!0,backends:{},includeNodeModules:!1,routes:["routes.js","routes.ts","routes.cjs"].find(t=>(0,Zi.existsSync)((0,Vr.join)(process.cwd(),t)))||"routes.js"}}get(t,r){if(this.has(t))return Tt(this.values,t);if(typeof r<"u")return r;throw new Error(`Layer0 configuration key: "${t}" is not defined`)}has(t){return this.values||this.loadLayer0Config(),Ji(this.values,t)}get all(){return this.values||this.loadLayer0Config(),this.values}loadLayer0Config(){let t=this.loadFromFile(),r=this.loadFromEnv();this.values=pl.default.all([{},this.defaults,t,r])}loadFromFile(){let t=[(0,Vr.join)(process.cwd(),cr),(0,Vr.join)(process.cwd(),cr.replace(".js",".cjs"))].find(Zi.existsSync);if(t)try{let r=ne(t);return dl.validateLayer0FileConfiguration(r)}catch(r){throw new Error(`Failed to load ${t}: ${r.message}`)}return{}}loadFromEnv(){if(process.env[ye.config])try{return JSON.parse(process.env[ye.config])}catch{throw new Error(`Layer0 configuration variable: ${ye.config}, is not parsable as json`)}return{}}},ml=new eo});var vl={};be(vl,{handler:()=>rw});async function rw(e,t){let r=new rt(t);r.start();let n=Hn(t);switch(e.action){case"getEdgeConfig":return Ze.createEdgeConfig();case"getPreloadConfig":return ro(()=>Ze.createPreloadConfig())}let i,o,s;try{let a=nl(e,r,{allowReqQueryDuplicates:Ze.allowReqQueryDuplicates});i=a.req,o=a.res,s=a.responsePromise}catch(a){return ro(()=>(console.log("Failed to parse the event to get request and response data:",a.message,a.stack),{body:Buffer.from('{"error":"Failed to parse the event to get request and response data"}'),isBase64Encoded:!0,statusCode:530,statusMessage:"Internal Layer0 Error",multiValueHeaders:{}}))}return await ro(async()=>{let a=i.headers||{};n.logDownstreamRequestInfo({method:i.method,path:i.url,host:a.host,headers:a,protocol:`${a["x-0-protocol"]||"https"}:`,...ct(i._rawBodyBase64,i.headers)});try{await iw(3001)}catch(u){throw console.error(u),u}return Gc(()=>Ze.run(i,o))(),s.then(u=>{let c=o.headers||{};return n.logDownstreamResponseInfo({statusCode:o.statusCode,statusMessage:o.statusMessage,headers:c,...ct(u.body,o.headers)}),u})},i,t)}async function nw(e){let t=(0,zr.join)(process.cwd(),jc(ue.js));if((0,gl.existsSync)(t)){let r=ne(t);r.default&&(r=r.default),await r(e),Ze.setBackend(ue.js,{domainOrIp:$n,port:e});let n=process.env.LAYER0_IMAGE_OPTIMIZER_PORT;n&&!/^\d+$/.test(n)&&(console.error("Error: LAYER0_IMAGE_OPTIMIZER_PORT is not valid number"),process.exit(1)),Ze.setBackend(ue.imageOptimizer,{domainOrIp:process.env.LAYER0_IMAGE_OPTIMIZER_HOST,port:n?parseInt(n):void 0})}}async function iw(e){return to||(to=nw(e)),to}function ow(e,t){(process.env.LAYER0_LOCAL!=="true"||process.env.LAYER0_LOCAL_CONSOLE_WRAP==="true")&&yr.enable({clientIp:e&&e.headers[P.x0ClientIp],requestId:e&&e.headers[P.xRequestId],wi:t==null?void 0:t.id})}function sw(){yr.disable()}async function ro(e,t,r){try{return ow(t,r),await e()}finally{sw()}}var gl,zr,Ze,to,Sl=L(()=>{"use strict";re();gl=Ee(kc()),zr=require("path");Mc();Vc();zc();We();il();Un();Gn();rn();hl();Ze=Si("./"+(0,zr.basename)(ml.get("routes")))});var fw={};be(fw,{handler:()=>cw});module.exports=Oe(fw);var{default:aw}=(rn(),Oe(Oo)),wl=new aw,{interceptRequests:uw}=xa();async function cw(e){return uw(e,{enableHttpRequestLogging:process.env.LAYER0_HTTP_REQUEST_LOGGING==="1",lambdaInstance:wl}),(async()=>{let{handler:t}=(Sl(),Oe(vl));return await t(e,wl)})()}0&&(module.exports={handler});
/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
//# sourceMappingURL=handler.js.map
